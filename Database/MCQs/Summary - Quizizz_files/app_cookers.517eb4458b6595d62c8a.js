(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app_cookers"],{"04f5":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return m})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return g}));var r=a("5530"),n=(a("caad"),a("2532"),a("7db0"),a("d3b7"),a("fb6a"),a("159b"),a("99af"),a("ac1f"),a("1276"),a("2ef0")),s=a.n(n),o=a("1383"),i=a("f121"),u=a("fb50"),c=a("e56d"),d=a("e176");function l(e,t){var a=e.applicationContext,r=new d["a"](s.a.get(window,"location.href")),n=s.a.get(document,"referrer"),i=r.query,u={source:"direct",screen:t,referrer:n};return i.c?u.source="lms":i.gc?u.source="code":i.from&&"gameRejoin"===i.from&&(u.source="rejoin"),Object(o["a"])(i.ld)||(u.loadData=i.ld),s.a.isNumber(a.lastActivityOn)&&(u.openedAfter=Date.now()-s.a.toNumber(a.lastActivityOn)),a.areNetworkEventsAllowedInSession&&(u.networkEventsAllowed=!0),u.loadType=Object(c["s"])(),{eventParams:u}}function m(e){var t=e.applicationContext,a=e.game,r=e.user,n=e.appSettings,i=e.liveReactions,u=e.readAloud,c=e.raiseHand,d=null;if(!Object(o["a"])(a.player.lastGamePlayed)){var l=s.a.clone(a.player.lastGamePlayed);d=b(l)}var m=null;a.player.hasJoinedTheGame&&(m=Date.now());var p=["lastGamePlayed"],g=s.a.pickBy(a.player,(function(e,t){return!s.a.includes(p,t)}));return{currentPlayer:g,userProfile:r.profile,game:d,applicationContext:{deviceInfo:t.deviceInfo,lastGameActivityOn:m,lastActivityOn:Date.now()},appSettings:n,liveReactions:i,raiseHand:c,readAloudV2:u}}function p(e,t,a){var r=e.appSettings,n=s.a.find(i["c"].Languages,{lang:"English"}).locale,u=!1,d="",l=!1,m={},p=null;t&&t.game&&(p=y(t.game));var g=O(t,p),f=g.userProfile&&g.userProfile.mongoId||"",b={};Object(o["a"])(g.userProfile)||(b={isLoggedIn:!0===g.userProfile.isLoggedIn});var h={currentPlayer:g.currentPlayer,game:g.game,applicationContext:g.applicationContext,appSettings:g.appSettings,prevSessionMongoId:f,userProfile:b,liveReactions:g.liveReactions,raiseHand:g.raiseHand,readAloudV2:g.readAloudV2},I=s.a.get(h,"appSettings.selectedLanguage",""),v=s.a.get(h,"appSettings.selectedTheme",""),A=s.a.get(h,"appSettings.isThemeAsLucky",!1),S=s.a.get(h,"appSettings.currentThemeWhichWasSetOnce","");return Object(c["B"])(I)&&I!==r.selectedLanguage&&h!==n&&(d=I,u=!0),S&&S===i["c"].ThemeSettings.NEXT_THEME_TO_BE_SET_ONCE?(Object(c["J"])(v)||A)&&(l=!0,m={selectedTheme:s.a.includes(a.themesAllowedToUser,v)?v:i["c"].ThemeNames.CLASSIC,isThemeAsLucky:A}):(l=!0,m={selectedTheme:i["c"].ThemeSettings.NEXT_THEME_TO_BE_SET_ONCE,currentThemeWhichWasSetOnce:i["c"].ThemeSettings.NEXT_THEME_TO_BE_SET_ONCE}),{prevContext:h,shouldSetAppLanguage:u,selectedLanguage:d,shouldSetAppTheme:l,setThemeMutationPayload:m}}function g(e,t,a){var r=t.query||{},n=!Object(o["a"])(r.gc),u=!Object(o["a"])(r.c),c={},d={},l="";if(n){var m=Object(o["a"])(r.startSource)?"":"|".concat(r.startSource),p=!Object(o["a"])(r.isFLMS),g="";g=p?i["k"].get(i["k"].List.GAME_CODE.PSEUDO_LMS)+m:i["k"].get(i["k"].List.GAME_CODE.PARAM)+m;var f=s.a.max(i["c"].ALLOWED_LENGTHS_OF_GAME_CODE),b=r.gc.slice(0,f);d={roomCode:b,startSource:g}}return u&&(l=r.c),Object(o["a"])(r.redirOnGameExit)||(c.redirectOnGameExit=decodeURIComponent(r.redirOnGameExit)),{shouldStartGCParamFlow:n,gcParamPipelineActionPayload:d,shouldStartGoogleClassroomFlow:u,gclParamPiplineActionPayload:l,initialGameMetadata:c}}var f=["roomHash","quizId","quizName"];function b(e){var t={};return s.a.forEach(f,(function(a){Object(o["a"])(e[a])||(t[a]="".concat(a,"-").concat(Object(u["b"])(e[a],a+s.a.random(1,9999),"local",3)))})),Object(r["a"])(Object(r["a"])({},e),t)}function y(e){var t={};return s.a.forEach(f,(function(a){if(!Object(o["a"])(e[a])&&s.a.isString(e[a])){var r=s.a.includes(e[a],"".concat(a,"-"));if(r){var n=e[a].split("".concat(a,"-"))[1];t[a]=Object(u["a"])(n)}}})),Object(r["a"])(Object(r["a"])({},e),t)}function O(e,t){var a=!0,r=!0,n=!0,o=!0,i=!0;return s.a.isObject(t)&&(n=!(t.forPlayer||!t.subjects)),{currentPlayer:a&&e.currentPlayer||null,userProfile:r&&e.userProfile||null,game:n&&t||null,applicationContext:o&&e.applicationContext||null,appSettings:i&&e.appSettings||null,liveReactions:e.liveReactions||null,raiseHand:e.raiseHand||null,readAloudV2:e.readAloudV2||null}}},"0711":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return m})),a.d(t,"c",(function(){return p}));var r=a("5530"),n=a("2ef0"),s=a.n(n),o=a("1383"),i=a("f121"),u=a("0039");function c(e,t){var a=t.player,r=t.data,n=t.questions;return function(t){return!e||!a.isOver&&r.gameState===i["c"].GameState.RUNNING&&n.slidesFlowControlType!==i["c"].SlidesFlowControlTypes.NONE&&!t}}function d(e){var t=e.remainingOrder,a=e.hasReachedMastery,r=e.currentId;return a?0===t.length&&""===r:a}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s=e.player,i=e.data,l=e.questions,m=n.areQuestionAttemptsLeft&&!n.isUserOnReviewScreen,p=n.isMasteryMode,g=t.gameType||i.gameType,f=Object(u["kb"])(g),b=Object(r["a"])({},t),y=c(a,e),O=y(m);if(p){var h=d({remainingOrder:l.remainingOrder,hasReachedMastery:n.hasReachedMastery,currentId:l.currentId});O=h}return Object(o["a"])(b)&&(b.roomHash=i.roomHash,b.playerId=s.playerId),b.endedAt=Date.now(),{canMarkPlayerGameOverNow:O,payload:b,isAssignedGame:f}}function m(e,t,a,r){var n=e.data,u=e.player,c=!1,d=!1,l={},m=n.gameMode===i["c"].GameMode.CHALLENGE;e.questions.initSequence.length;return a?(c=t.gameOver,l.roomHash=n.roomHash,d=s.a.get(u,"lastGamePlayed.roomHash")===s.a.get(t,"roomHash"),l.teams=n.teams,t.teams&&t.teams.length>0&&(l.teams=t.teams),m&&!Object(o["a"])(t.leaderboard)&&(l.leaderboard=t.leaderboard)):(c=!0,l={roomHash:n.roomHash,gameDetails:{quizId:n.quizId,accuracy:u.accuracy},playerRank:u.rank,gameType:i["c"].GameType.SOLO},d=s.a.get(u,"lastGamePlayed.roomHash")===s.a.get(t,"data.roomHash")),{isGameOver:c,response:l,shouldClearIncompleteGameData:d,isAChallengeGame:m}}function p(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.game.data.roomHash,n=e.user.profile.mongoId||"",o=e.applicationContext.deviceInfo.quizizzUID||"",i={quizNumQuestions:s.a.get(a,"numQuestions","12")};return n?i.hostId=n:o&&(i.hostSessionId=o),{quizId:t,roomHash:r,hostId:n,hostSessionId:o,replayMeta:i}}},"0b05":function(e,t,a){"use strict";a.d(t,"h",(function(){return l})),a.d(t,"c",(function(){return m})),a.d(t,"e",(function(){return p})),a.d(t,"i",(function(){return g})),a.d(t,"a",(function(){return f})),a.d(t,"f",(function(){return b})),a.d(t,"g",(function(){return y})),a.d(t,"b",(function(){return O})),a.d(t,"d",(function(){return h}));var r=a("2909"),n=a("5530"),s=(a("d81d"),a("b0c0"),a("c740"),a("ac1f"),a("841c"),a("1276"),a("aff5"),a("a9e3"),a("99af"),a("2ef0")),o=a.n(s),i=a("1383"),u=(a("f121"),a("7eda")),c=a("0039"),d=a("4871");function l(e){var t=e.data&&e.data.total||0,a=[];return e.data&&Array.isArray(e.data.hits)&&(a=o.a.map(e.data.hits,(function(e){return f(e)}))),{result:a,total:t,searchService:e.meta.service,searchVersion:e.meta.version}}function m(e){var t=e.length,a=o.a.shuffle(o.a.map(e,(function(e){return f(e)})));return{result:a,total:t}}function p(e){var t=o.a.map(e.data.quizzes,(function(e){return{id:e._id,name:e.info.name,image:e.info.image,numQuestions:e.stats.totalQuestions,playCount:e.stats.totalPlayers,quizData:null,isSuper:e.isSuper,type:e.type}})),a=o.a.get(e,"data.version",""),r=o.a.get(e,"data.timeTaken",""),n=o.a.get(e,"data.experiment","");return{list:t,version:a,timeTaken:r,experiment:n}}function g(e){var t=o.a.map(e.data.quizzes,(function(e){return{id:e._id,name:e.info.name,image:e.info.image,numQuestions:e.stats.totalQuestions,playCount:e.stats.totalPlayers,quizData:null}})),a=o.a.get(e,"data.version",""),r=o.a.get(e,"data.timeTaken",""),n=o.a.get(e,"data.experiment","");return{list:t,version:a,timeTaken:r,experiment:n}}function f(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[],r=e.info.questions,s=e.createdBy,u=t?Object(d["b"])(s,!1,""):I(e.createdBy),l=e.stats||{},m=0;m<3&&m<r.length;m++)r[m]&&(a[m]=Object(n["a"])({},r[m].structure.query));return{quizId:e._id,name:e.info.name,image:e.info.image,subjects:e.info.subjects||null,grades:e.info.grade||null,topics:e.info.topics,isProfane:e.info.isProfane,isWhitelisted:e.info.whitelisted,visibility:e.info.visibility,createdAt:e.createdAt&&new Date(e.createdAt)||null,lovedByUser:e.isLoved||null,questions:a,numQuestions:r.length,isInDraft:!Object(i["a"])(e.draft),type:Object(c["bb"])(e),creator:{id:o.a.get(e,"createdBy._id")||null,image:o.a.get(e,"createdBy.media")||null,occupation:o.a.get(e,"createdBy.occupation")||null,username:o.a.get(e,"createdBy.username")||null,fullName:u,privileges:o.a.get(e,"creatorPrivileges",{})},stats:{love:e.love,totalGamesStarted:l.played,avgAccuracy:o.a.round(l.totalCorrect/l.totalQuestions,2),totalPlayersJoined:l.totalPlayers}}}function b(e,t){var a=e.data.quiz,r=f(a),s=r.quizId,i=t.quizRecommendations,u=o.a.findIndex(i,(function(e){return e.id===s}));return i[u]=Object(n["a"])(Object(n["a"])({},i[u]),{},{quizData:r}),{forQuizId:s,currentRecomendations:i,quizData:r}}function y(e){var t=e.rootState,a=e.searchText,r=e.from,n=e.pageSize,s=e.gradesFilter,u=e.subjectFilter,c=e.languageFilter,d=e.questionNumRange,l=e.metaData,m=t.search.queryDetails,p=t.user,g=t.applicationContext,f=[],b=l||{},y=[!1],O={query:a,id:"",source:m.source};if(""!==a&&(a!==m.query||Object(i["a"])(m.id)?O.id=v(p.profile.mongoId,a):O.id=m.id),!Object(i["a"])(d)){var h=d.split(",");f.push(o.a.toNumber(h[0])||null),f.push(o.a.toNumber(h[1])||null)}return p.profile.isLoggedIn&&!p.profile.isUnderAge&&(y=[!0,!1]),O.id&&(b.queryId=O.id),b.clientType=g.clientType,b.source=O.source,{requestArgs:{searchText:a,from:r,pageSize:n,gradesFilter:s,subjectFilter:u,languageFilter:c,questionNumRange:f,profaneFilter:y,metaDataToUse:b},mutationPayload:{queryDetails:O}}}function O(e){var t=[];return e.success&&e.data.sections.length&&(t=Object(r["a"])(e.data.sections),o.a.each(t,(function(e){e.quizzes=o.a.map(e.quizzes,(function(e){return o.a.assign(f(e),{numQuestions:o.a.get(e,"stats.numQuestions",0)})}))}))),{recommendedSections:t}}function h(e){var t={};return e.success&&!Object(i["a"])(e.data)&&(t=e.data,t.quizzes=o.a.map(t.quizzes,(function(e){var t=f(e);return o.a.assign(t,{numQuestions:o.a.get(e,"stats.numQuestions",t.numQuestions)}),t}))),{recommendedTopicData:t}}function I(e){return(Object(u["b"])(e.occupation)&&e.title&&"".concat(e.title," ")||"")+Object(d["b"])(e,!1,"")}function v(e,t){var a=e||o.a.floor(Math.random()*Number.MAX_SAFE_INTEGER);return"".concat(a,"-").concat(Date.now())}},"3a01":function(e,t,a){"use strict";a.d(t,"d",(function(){return m})),a.d(t,"b",(function(){return p})),a.d(t,"c",(function(){return g})),a.d(t,"a",(function(){return f}));var r=a("2909"),n=a("ade3"),s=a("5530"),o=(a("498a"),a("fb6a"),a("ac1f"),a("5319"),a("13d5"),a("d3b7"),a("ddb0"),a("4de4"),a("caad"),a("2532"),a("99af"),a("159b"),a("2ef0")),i=a.n(o),u=a("bbf8"),c=a("1383"),d=a("f121"),l=a("3bb0");a("0039");function m(e,t){var a=e.game,r=!1,n={},o=null;return a.player.isOver?r=!0:(n={numQuesAttempted:t.orderedOriginalResponses.length,accuracy:a.player.accuracy},o=a.questions.currentId),{isComplete:r,playerStats:n,lastVisibleQuestionId:o,isOver:a.player.isOver,questionTimer:Object(s["a"])({},a.flow.questionTimer)}}function p(e){var t=[],a={},r={};return Object(c["a"])(e)||(t.push({quizInfo:{quizId:e.quizId},fromList:"running",numQuesAttempted:e.numQuesAttempted,areAllAttemptsFetched:!0,gamesAttempted:[{attempts:[Object(s["a"])(Object(s["a"])({},i.a.pick(e,["numQuestions","numQuesAttempted","numCorrect","playerId"])),{},{numAnswerableQuestions:i.a.isNumber(e.numQuestions)?e.numQuestions:1,isOver:!1})],gameInfo:{roomHash:e.roomHash,gameType:e.gameType,gameCode:e.roomCode,gameState:d["c"].GameState.RUNNING,gameCreatedAt:null,dueDate:e.expiry&&new Date(e.expiry)||null,host:{},hasLMSAttempts:e.isClassroomGame,lmsInfo:e.classroomInfo}}]}),r[e.quizId]={name:e.quizName,image:e.quizImage,subjects:e.subjects,grades:e.grade,questions:null}),{games:t,users:a,quizzes:r}}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d["c"].DEFAULT_PLAYER_NAME;if(i.a.isString(e)){var a=e.trim();!a&&(a=t);var r=a.slice(0,d["c"].ALLOWED_PLAYER_NAME_LENGTH);return r=r.replace(/{|\[|</g,"("),r=r.replace(/}|\]|>/g,")"),r=r.replace(/['"&/]/gi,""),r}return t}function f(e,t,a,o,c,m){var p={marks:null,score:0,accuracy:0,totalCorrect:0},g={},f=[],b=o===d["c"].SlidesFlowControlTypes.NONE,y=[];if(b||o===d["c"].SlidesFlowControlTypes.FULL){var O=i.a.reduce(e,(function(e,t){return Object(s["a"])(Object(s["a"])({},e),{},Object(n["a"])({},t.questionId,t))}),{}),h=i.a.keys(O),I=i.a.filter(t,(function(e){return i.a.includes(h,e)}));y=i.a.reduce(I,(function(e,t){return[].concat(Object(r["a"])(e),[O[t]])}),[])}else y=i.a.sortBy(e,"createdAt");return i.a.forEach(y,(function(e,t){var a=i.a.isString(e)?JSON.parse(e):e,r=a.questionId,n=i.a.isNumber(a.attempt)?a.attempt:0,o=!(!g[r]||!g[r][n]),y={marks:null,score:0,wasCorrect:!1},O=!1===o||b;l["a"].invariant(O,"At cookServerPlayerResponses: The attempt num '".concat(n,"' for question id '").concat(r,"' already exists.")),o&&(y.marks=g[r][n].marks,y.score=g[r][n].score,y.wasCorrect=g[r][n].isCorrect),g[r]||(g[r]=[]),i.a.has(a,"scoreBreakup")&&(a.scoreBreakup=Object(u["b"])(a.scoreBreakup)),g[r].push(Object(s["a"])(Object(s["a"])({},a),{},{attempt:n,isEvaluated:!0})),c&&m!==d["c"].GameMode.MASTERY_MODE?g[r][n].isCorrect&&"attempted"===g[r][n].state&&f.push(r):f.push(r),o?(p.marks=a.marks?p.marks+(a.marks-y.marks):null,p.score+=a.score-y.score,p.totalCorrect+=(a.isCorrect?1:0)-(y.wasCorrect?1:0)):(a.marks&&(p.marks=a.marks?p.marks+a.marks:a.marks),p.score+=a.score,p.totalCorrect+=a.isCorrect?1:0)})),i.a.forEach(a,(function(e){p.score+=e.details.score})),p.accuracy=Math.floor(p.totalCorrect/t.length*100),{player:p,questionResponses:g,answeredQuestions:f}}},"420f":function(e,t,a){"use strict";a.d(t,"m",(function(){return p})),a.d(t,"j",(function(){return g})),a.d(t,"d",(function(){return f})),a.d(t,"e",(function(){return b})),a.d(t,"k",(function(){return y})),a.d(t,"a",(function(){return O})),a.d(t,"l",(function(){return h})),a.d(t,"i",(function(){return I})),a.d(t,"o",(function(){return v})),a.d(t,"n",(function(){return A})),a.d(t,"h",(function(){return S})),a.d(t,"g",(function(){return T})),a.d(t,"b",(function(){return q})),a.d(t,"f",(function(){return N})),a.d(t,"c",(function(){return E}));var r=a("2909"),n=a("5530"),s=a("53ca"),o=(a("d3b7"),a("ddb0"),a("ac1f"),a("1276"),a("159b"),a("4de4"),a("7db0"),a("caad"),a("2532"),a("99af"),a("a9e3"),a("d81d"),a("b0c0"),a("b64b"),a("13d5"),a("2ef0")),i=a.n(o),u=a("1383"),c=a("f121"),d=a("0039"),l=a("3bb0"),m={showAnswers:[{if:1,for:[2,3],then:function(e){return e?c["c"].GameOptionsValues.ShowAnswers.ALWAYS:c["c"].GameOptionsValues.ShowAnswers.PARTIAL}}],studentQuizReview:[{if:1,for:[2,3],then:function(e){return e?c["c"].GameOptionsValues.StudentQuizReview.YES:c["c"].GameOptionsValues.StudentQuizReview.NO}}],timer:[{if:1,for:[3],then:function(e){return e?c["c"].GameOptionsValues.Timer.CLASSIC:c["c"].GameOptionsValues.Timer.OFF}}]};function p(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=q(e,!0,t),r={},n={},o=i.a.keys(a),d=0;d<o.length;d++){var p=o[d],g=p.split("_"),f=g[0],b=i.a.toNumber(g[1])||1;b<=c["c"].ALLOWED_VERSION_OF_GAME_SETTINGS&&(!r[f]||b>=n[f])&&(r[f]=a[p],n[f]=b)}return i.a.forEach(n,(function(e,t){var a=i.a.has(m,t);if(a){var n=i.a.filter(m[t],{if:e});if(!Object(u["a"])(n)){var o=i.a.find(m[t],(function(e){return i.a.includes(e.for,c["c"].ALLOWED_VERSION_OF_GAME_SETTINGS)}));l["a"].invariant(!Object(u["a"])(o),"serverGameOptionsCooker: No corresponding value exist for game option ".concat(t," when version received is ").concat(e," and supported version is ").concat(c["c"].ALLOWED_VERSION_OF_GAME_SETTINGS));var d,p=j(),g=o.then(r[t]);i.a.forEach(i.a.orderBy(o.for,Number,"desc"),(function(e){var a=p["".concat(t,"_").concat(e)];if(!i.a.isNil(a))return d=a,!1}));var f=Object(s["a"])(g)===Object(s["a"])(d);l["a"].invariant(f,"serverGameOptionsCooker: corresponding value(".concat(g,") is not valid for game option ").concat(t," when version received is ").concat(e," and supported version is ").concat(c["c"].ALLOWED_VERSION_OF_GAME_SETTINGS)),r[t]=f?g:d}}})),r}function g(e,t,a){var r,n,s,o,u={},d=e.appSettings,l=e.game,m={};(d.showMemes&&i.a.isBoolean(a.memes)&&(u.showMemes=a.memes,!1===a.memes&&(m.showMemes=d.showMemes)),d.playMusic&&i.a.isBoolean(a.studentMusic))&&((null===e||void 0===e||null===(r=e.game)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.gameMode)===c["c"].GameMode.MYSTIC_PEAK?u.playMusic=!0:u.playMusic=a.studentMusic,!1===a.studentMusic&&(m.playMusic=d.playMusic));(d.playSFX&&i.a.isBoolean(a.studentSFX)&&(u.playSFX=a.studentSFX),i.a.includes(t.themesAllowedToUser,d.selectedTheme))||((null===e||void 0===e||null===(s=e.game)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.gameMode)===c["c"].GameMode.MYSTIC_PEAK?u.selectedTheme=c["c"].ThemeNames.MYSTIC_PEAK:u.selectedTheme=c["c"].ThemeNames.CLASSIC,m.selectedTheme=d.selectedTheme);return l.questions.slidesFlowControlType===c["c"].SlidesFlowControlTypes.NONE&&(u.readAloud=!1,m.readAloud=d.readAloud),{changedSettings:u,appSettingsToRevert:m}}function f(e,t,a){var r={};return i()(a).groupBy("type").forEach((function(e,t){r[t]=i.a.shuffle(i.a.map(e,(function(e){return e.finalURL})))})),{createdBy:i.a.get(a[0],"createdBy",""),memeSet:r,responses:i.a.map(t.allOrderedResponses,(function(e){return e.isCorrect})),questionsCount:t.totalQuestionsInGame}}function b(e){var t=e.data||e||{},a=null;return t.stats&&t.stats.totalQuestions&&t.stats.totalCorrect&&(a=Math.floor(t.stats.totalCorrect/t.stats.totalQuestions*100)),{quizId:t.quizId||"",quizName:t.name||"",grade:t.grade,subjects:t.subjects,image:t.image,accuracy:a,quizCreator:t.creator,isQuizPublic:!i.a.isBoolean(t.visibility)||t.visibility}}function y(e,t,a){var r=a.data,s=a.creatorPrivileges,o=a.contestId,l=a.embedMode,m=e.routing,p=r.quiz,g=Object(u["a"])(p.info)?r.draft:p.info,f=i.a.get(m,"pageMetaData.source",c["k"].get(c["k"].List.PRE_GAME_SCREEN)),b=Object(u["a"])(t.startSource)?f:t.startSource,y=Object(d["bb"])({type:p.type,traits:g.traits}),O=i.a.get(p,"info.questions",[]),h=Object(u["a"])(b)?c["k"].get(c["k"].List.PRE_GAME_SCREEN):b,I=O.map((function(e){return{type:e.type}})),v={quizName:g.name,image:g.image||"",creator:Object(n["a"])(Object(n["a"])({},p.createdBy),{},{privileges:s||{}}),numberOfQuestions:O.length,quizId:p._id,quizSubjects:g.subjects,quizTraits:g.traits,quizType:y,questionVersions:I},A={gameState:c["c"].GameState.COMPLETED};return{currentGameData:A,currentQuizData:v,screenOpenSource:h,soloLinkReferrer:t.soloLinkReferrerId||"",contestId:o,embedMode:l}}function O(e){var t=i.a.get(e,"items[0].groupsInfo"),a={isLMSGame:!1,gclToken:"",groupId:"",courseId:"",lmsName:""};return t?(i.a.isBoolean(t.hasGCL)&&!0===t.hasGCL&&(a.isLMSGame=!0),a.gclToken=i.a.get(t,"gclToken",""),a.courseId=i.a.get(t,"gcl[0].gclCourseId",""),a.groupId=i.a.get(t,"gcl[0].groupId",""),a.lmsName=i.a.get(t,"gcl[0].lmsName","gcl"),a):a}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={},r="",n="",s="",o=i.a.get(e.items[0],"currentQuestionIndex",-1);e.groupAssignedTotal>0?(a=e.groupAssignedItems[0].gamesAttempted[0],r=e.groupAssignedItems[0].quizInfo.quizId):e.items.length>0&&(a=e.items[0].gamesAttempted[0],r=e.items[0].quizInfo.quizId),a.attempts[0]&&a.attempts[0].playerId&&(n=a.attempts[0].playerId),s=a.gameInfo.gameType===c["c"].GameType.SOLO?e.quizzes[r].creator.id:a.gameInfo.host.id;var l=e.users[s]||{},m=a.gameInfo.lmsInfo||t||{},p=!1;i.a.isBoolean(a.gameInfo.hasLMSAttempts)&&a.gameInfo.hasLMSAttempts?p=!0:i.a.isBoolean(m.isLMSGame)&&(p=m.isLMSGame);var g=i.a.get(a,"gameInfo.numQuestions"),f=i.a.get(a,"gameInfo.assignmentTitle"),b=0;i.a.isNumber(g)&&g>0?b=g:i.a.isNumber(e.quizzes[r].numOfQuestions)&&(b=e.quizzes[r].numOfQuestions),Object(u["a"])(m)||(m.roomHash=a.gameInfo.roomHash,m.roomCode=a.gameInfo.gameCode);var y=i.a.get(e.quizzes[r],"creator.id",""),O={};y&&(O=e.users[y]||{});var h=a.attempts;Object(u["a"])(h[0])||(h[0].currentQuestionIndex=o),i.a.forEach(h,(function(e){e.roomHash=a.gameInfo.roomHash}));var I={host:l,groupData:{type:a.gameInfo.groupType||c["c"].GameGroupType.NONE,ids:a.gameInfo.groupIds||[],dueDate:a.gameInfo.dueDate||"",assignmentTitle:f},dueDate:a.gameInfo.dueDate||"",lmsInfo:m,gameType:a.gameInfo.gameType||"",gameMode:a.gameInfo.gameMode,gameState:a.gameInfo.gameState,isLMSGame:p,roomHash:a.gameInfo.roomHash,roomCode:a.gameInfo.gameCode,gameStartedOn:a.gameInfo.gameCreatedAt,playerId:n,gameHostName:l.fullName||l.username||""},v={quizName:e.quizzes[r].name||"",image:e.quizzes[r].image||"",quizTraits:e.quizzes[r].traits||{},numberOfQuestions:b,quizSubjects:e.quizzes[r].subjects||[],quizId:r,creator:O,quizType:Object(d["bb"])(e.quizzes[r])};return{currentAttempts:h,currentGameData:I,currentQuizData:v,screenOpenSource:"direct"}}function I(e){var t=[{numCorrect:e.numCorrect,numQuestions:e.numQuestions,playerId:e.playerId,numQuesAttempted:e.numQuesAttempted,isOver:!!i.a.isBoolean(e.isOver)&&e.isOver,gameType:e.gameType,gameMode:e.gameMode||c["c"].GameMode.NORMAL}],a={gameType:e.gameType,gameMode:e.gameMode||c["c"].GameMode.NORMAL,playerId:e.playerId,roomCode:e.roomCode,roomHash:e.roomHash},r={quizName:e.quizName,quizId:e.quizId,image:e.quizImage,numberOfQuestions:e.numQuestions,quizSubjects:e.subjects};return{currentAttempts:t,currentGameData:a,currentQuizData:r}}function v(e,t){var a=e.user,s=a.attempts.commonQuizzesData[t.quizInfo.quizId],o=i.a.get(t,"gamesAttempted[0].gameInfo.host.id"),l={};o&&(l=a.attempts.commonUsersData[o]);var m=Object(r["a"])(i.a.get(t,"gamesAttempted[0].attempts",[])),p=i.a.get(t,"gamesAttempted[0].gameInfo",{}),g=p.lmsInfo||{},f=p.assignmentTitle,b=i.a.get(s,"creator.id",""),y="",O={},h=!1;i.a.isBoolean(p.hasLMSAttempts)&&p.hasLMSAttempts?h=!0:i.a.isBoolean(g.isLMSGame)&&(h=g.isLMSGame),Object(u["a"])(g)||(g.roomHash=p.roomHash,g.roomCode=p.gameCode),m[0]&&(m[0].playerId&&(y=m[0].playerId),m[0]=Object(n["a"])(Object(n["a"])({},m[0]),{},{currentQuestionIndex:i.a.get(t,"currentQuestionIndex",-1)})),b&&(O=a.attempts.commonUsersData[b]||{});var I={host:l,groupData:{type:p.groupType||c["c"].GameGroupType.NONE,ids:p.groupIds||[],dueDate:p.dueDate||"",assignmentTitle:f},lmsInfo:g,gameType:p.gameType||"",gameMode:p.gameMode,gameState:p.gameState,isLMSGame:h,roomHash:p.roomHash,roomCode:p.gameCode,gameStartedOn:p.gameCreatedAt,playerId:y,gameHostName:l&&(l.fullName||l.username)||""},v={quizName:s.name||"",image:s.image||"",quizTraits:s.traits||{},numberOfQuestions:m[0].numQuestions,quizSubjects:s.subjects||[],quizId:t.quizInfo.quizId,creator:O,quizType:Object(d["bb"])(s)};return{currentAttempts:m,currentQuizData:v,currentGameData:I}}function A(e,t){var a=t.quizId,r=t.quizData,n=t.contestId,s=t.embedMode,o=void 0!==s&&s,u=e.routing,l=e.user,m=i.a.find(l.attempts.completedGames,(function(e){return e.quizInfo&&e.quizInfo.quizId===a})),p=i.a.get(u,"pageMetaData.source",c["k"].get(c["k"].PRE_GAME_DETAIL)),g=0;g=i.a.isNumber(r.numOfQuestions)&&0!==r.numOfQuestions?r.numOfQuestions:i.a.get(m,"gamesAttempted[0].attempts[0].numQuestions",0);var f=i.a.get(r,"creator.id",""),b={};f&&(b=l.attempts.commonUsersData[f]||{});var y={quizName:r.name||"",image:r.image||"",quizTraits:r.traits||{},numberOfQuestions:g,quizSubjects:r.subjects||[],quizId:a,creator:b,quizType:Object(d["bb"])(r)},O={gameState:c["c"].GameState.COMPLETED};return{screenOpenSource:p,currentQuizData:y,currentGameData:O,contestId:n,embedMode:o}}function S(e){return i.a.isString(e)&&e.length>=c["c"].VALID_ROOM_HASH_LENGTH}function T(e,t){var a=i.a.get(window,"lmsError")||{},r=i.a.get(window,"lmsHash")||"",n=!1,s=null;return Object(u["a"])(a)&&!Object(u["a"])(r)&&(n=!0,s={roomCode:i.a.get(window,"gameCodeParam"),roomHash:i.a.get(window,"lmsHash"),lmsName:i.a.get(window,"lmsName"),courseId:i.a.get(window,"lmsCourseId")}),{isInValidFlow:n,encodedParam:t,decodedLMSInfo:s,error:a}}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={jumble:!0,jumbleAnswers:!0,showAnswers:!0,showAnswers_2:c["c"].GameOptionsValues.ShowAnswers.ALWAYS,studentQuizReview:!0,studentQuizReview_2:c["c"].GameOptionsValues.StudentQuizReview.YES,studentLeaderboard:!0,memes:!0,timer:!0,memeset:c["c"].DEFAULT_MEME_SET_ID,studentMusic:!0,loginRequired:!1,limitAttempts:0,redemption:c["c"].GameOptionsValues.Redemption.NO,nicknameGenerator:!1,mirror:!1,powerups:c["c"].GameOptionsValues.Powerups.NO,questionsPerAttempt:0,timer_3:c["c"].GameOptionsValues.Timer.CLASSIC};return Object(u["a"])(e)?t:i.a.pick(t,e)}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object.keys(e),n=j(a?r:[]);t&&i.a.forEach(n,(function(e,t){var a=i.a.toNumber(t.split("_")[1])||1;a>1&&delete n[t]}));var o=n;return i.a.forEach(e,(function(t,a){if(o[a]){var r=Object(s["a"])(t)===Object(s["a"])(o[a]);l["a"].invariant(r,['getDefaultedGameOptions: given value "'.concat(t,'" for option "').concat(a,'" does not correspond to allowed values'),e]),o[a]=Object(s["a"])(t)===Object(s["a"])(o[a])?t:o[a]}else o[a]=t})),o}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=j(),a=i.a.keys(t),r=i.a.filter(a,(function(e){return e.split("_").length>1})).map((function(e){var t=e.split("_");return{name:t[0],version:i.a.toNumber(t[1])||1}}));return i.a.reduce(e,(function(e,t,a){var n=i.a.filter(r,{name:a});if(n.length>0){var s=i.a.maxBy(n,"version").version;e["".concat(a,"_").concat(s)]=t}else e[a]=t;return e}),{})}function E(e,t){var a=t.id,r=t.hostId,n=t.code,s=t.hostSessionId,o=i.a.get(e,"user.profile.mongoId",""),c=i.a.get(e,"applicationContext.deviceInfo.quizizzUID",""),d=r&&r===o||s&&s===c,l={},m=!1;r?l=i.a.find(t.players,{mongoId:r}):s&&(l=i.a.find(t.players,{uid:s})),Object(u["a"])(l)||(m=!0);var p=i.a.get(l,"id","")||i.a.get(e,"game.player.playerId","");return{roomCode:n,roomHash:a,hostId:r,isUserTheGameHost:d,hasUserJoinedTheGame:m,userPlayerId:p}}},4871:function(e,t,a){"use strict";a.d(t,"c",(function(){return p})),a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return f})),a.d(t,"i",(function(){return b})),a.d(t,"h",(function(){return y})),a.d(t,"e",(function(){return O})),a.d(t,"d",(function(){return h})),a.d(t,"f",(function(){return I})),a.d(t,"g",(function(){return v}));var r=a("5530"),n=a("2909"),s=(a("b0c0"),a("d3b7"),a("159b"),a("b64b"),a("ac1f"),a("1276"),a("99af"),a("5319"),a("13d5"),a("d81d"),a("7db0"),a("841c"),a("d401"),a("25f0"),a("2ef0")),o=a.n(s),i=a("f121"),u=a("1383"),c=a("e176"),d=a("7810"),l=a("e56d"),m=a("a849");function p(e,t){var a={firstName:e.firstName||"",lastName:e.lastName||"",mongoId:e.id,photoUrl:e.media,selectedAvatar:e.selectedAvatar,courses:e.courses,isUnderAge:e.student&&e.student.underAge||!1,language:e.preferences&&e.preferences.lang||null,totalStats:e.totalStats||null,dob:e.student?new Date(e.student.dob):null},r=e.username||e.userName||o.a.get(e,"local.casedUsername","");return a.isUnderAge?(a.email=r,a.userName=r):(a.email=e.email||o.a.get(e,"local.casedEmail",""),a.userName=r),a.name=g(e,a.isUnderAge),e.grades&&Array.isArray(e.grades)&&(a.gradeList=Object(n["a"])(e.grades)),e.subject_tags&&Array.isArray(e.subject_tags)&&(a.favSubjects=Object(n["a"])(e.subject_tags)),e.occupation&&(a.occupation=e.occupation),e.parent&&e.parent.email&&(a.parentEmail=e.parent.email),Array.isArray(e.groups)&&(a.groupIds=e.groups),e.lms&&(a.lmsInfo={},Object.keys(e.lms).forEach((function(t){e.lms[t]&&(a.lmsInfo[t]={email:e.lms[t].email,studentId:e.lms[t].id})}))),e.country&&(a.country=e.country),e.currentPlanStatus&&(a.currentPlanStatus=e.currentPlanStatus),e.createdAt&&(a.createdAt=e.createdAt),e.organization&&(a.organization=e.organization),e.paidOrganization&&(a.paidOrganization=e.paidOrganization),e.organizationRole&&(a.organizationRole=e.organizationRole),e.google&&(a.google=e.google),e.microsoft&&(a.microsoft=e.microsoft),e.local.phoneNumber&&(a.phoneNumber=e.local.phoneNumber),o.a.isBoolean(e.hasPassword)&&(a.hasPassword=e.hasPassword),Array.isArray(e.subscriptions)&&(a.subscriptions=e.subscriptions),a}function g(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i["c"].DEFAULT_PLAYER_NAME,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=!0===r.addTitle,s=!0===r.firstNameOnly,o=!0===r.lastNameOnly,u=e.username||e.local&&e.local.username||"",c="";return e.firstName||e.lastName||!e.email?(!e.firstName||o&&e.lastName||(c+=e.firstName),!e.lastName||s&&e.firstName||(c+=" ".concat(e.lastName))):c=t?u||a:e.email.split("@")[0],n&&e.title?"".concat(e.title," ").concat(c||u):c||u}function f(e,t){var a=e,r="",n=!1;return"success"===e?"Done"!==t.message&&"ok"!==o.a.toLower(t.message)||(a=i["c"].CallResolveStatuses.SUCCESS,r=t.message,n=!0):(a=i["c"].CallResolveStatuses.FAILED,t.response&&(r="",o.a.isString(t.response.message)&&(r=t.response.message.replace("<newPassword>","Password")||""))),{status:a,message:r,changeSuccessful:n}}function b(e){var t=o.a.reduce(e,A,{}),a=o.a.map(e,(function(e){return e.prop}));return{requestData:t,propsBeingUpdated:a}}function y(e,t,a,n){var s=e.user,i="",u="",c={},d=!1,l={};if("ok"===o.a.lowerCase(a.message)||"done"===o.a.lowerCase(a.message)){i="success";for(var m=o.a.pick(s.profile,["userName","photoUrl","gradeList","favSubjects","language","selectedAvatar","name","firstName","lastName"]),p={},f=a.data.user,b=0;b<n.length;b++)switch(n[b]){case"userName":p.userName=f.local.casedUsername,p.name=g(Object(r["a"])(Object(r["a"])({},f.local),{},{firstName:f.firstName,lastName:f.lastName}),f.isUnderAge);break;case"firstName":p.firstName=f.firstName||"";case"lastName":p.lastName=f.lastName||"",p.name=g(Object(r["a"])(Object(r["a"])({},f.local),{},{firstName:f.firstName,lastName:f.lastName}),f.isUnderAge),!1===t.isPlayerInGame&&(d=!0,l={playerName:p.name});break;case"gradeList":p.gradeList=f.grades;break;case"language":p.language=f.preferences.lang;break}c=Object(r["a"])(Object(r["a"])({},m),p)}else i="failed",u="An error has occurred, please try again.";return{updatedProps:c,status:i,message:u,shouldUpdatePlayerId:d,playerIdUpdateMutationPayload:l}}function O(e){var t=o.a.find(i["c"].Languages,{lang:"English"}).locale,a=!1,r={},n=!1,s="",c=!1;window&&"user"in window&&!Object(u["a"])(window.user)&&(r=p(window.user));var d=e.rootReducer&&e.rootReducer.prevSessionMongoId||"",m=r.mongoId;m&&d&&m!==d&&(a=!0),Object(l["B"])(r.language)&&r.language!==e.appSettings.selectedLanguage&&r.language!==t&&(n=!0,s=r.language);var g=-1!==o.a.get(r,"occupation","").indexOf("corporate");return g&&r.selectedAvatar<=0&&(r.selectedAvatar=o.a.sample([o.a.random(0,11),o.a.random(13,37)]),c=!0),{shouldSignOutFirst:a,shouldSetAppLanguage:n,selectedLanguage:s,shouldSaveUserAvatar:c,userData:r}}function h(e){var t=e.courses||[],a=t.map((function(e){return e._id})),n=Object(r["a"])(Object(r["a"])({},e),{},{courses:a}),s=p(n);return{userData:s}}function I(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n={isAuthenticatedUser:!1,error:""},s="",d=!1;if(t.data.isGoogle||t.data.isMicrosoft)n.isAuthenticatedUser=!1,n.error="Please use the ".concat(t.data.isGoogle?'"Continue with Google"':'"Continue with Microsoft"'," button above");else if(t.data.deactivated)s="/reactivate";else if("Ok"===t.message)if(n.isAuthenticatedUser=!0,a){var l=e.game.data.roomCode,m=new c["a"](window.location.href),p=o.a.find(m.query,"gc"),g=Object.keys(m.query);s=g>0?p?"".concat(i["G"].getAppBaseUrl()).concat(window.location.search):"".concat(m,"&gc=").concat(l):"".concat(i["G"].getAppBaseUrl(),"?gc=").concat(l)}else Object(u["a"])(r)?d=!0:s=r;else n.error=t.message,n.isAuthenticatedUser=!1;return{redirectToHREF:s,shouldReload:d,mutationPayload:n}}function v(e){var t={},a=o.a.find(i["c"].ThemeNames,(function(t){return o.a.toString(Object(m["g"])(t))===o.a.toString(e.count)}));return t.message=Object(d["c"])("You've hit a ".concat(e.count," day streak and unlocked ").concat(Object(m["h"])(a)," theme.")),t.name=a,t.type="theme-streak-notification",t}function A(e,t){var a=t.prop,r=t.data,n=e;switch(a){case"language":!n.preferences&&(n.preferences={}),n.preferences.lang=r;break;case"userName":!n.local&&(n.local={}),n.username=r;break;case"firstName":n.firstName=r;case"lastName":n.lastName=r;break;case"gradeList":n.grades=Array.isArray(r)?r:[r];break}return n}},"6a73":function(e,t,a){"use strict";a.d(t,"a",(function(){return y})),a.d(t,"i",(function(){return O})),a.d(t,"c",(function(){return h})),a.d(t,"g",(function(){return I})),a.d(t,"d",(function(){return v})),a.d(t,"e",(function(){return A})),a.d(t,"h",(function(){return S})),a.d(t,"b",(function(){return T})),a.d(t,"f",(function(){return j}));var r=a("5530"),n=a("2909"),s=(a("c740"),a("a434"),a("e25e"),a("99af"),a("ac1f"),a("1276"),a("fb6a"),a("a15b"),a("caad"),a("2ef0")),o=a.n(s),i=a("f121"),u=a("124d"),c=a("3bb0"),d=a("1383"),l=a("24ad"),m=a("5350"),p=a("d765"),g=["getRunningGame"],f=50,b=".",y=1;function O(e,t,a){var r=e.callsInProgress,s=Object(n["a"])(r),u=o.a.findIndex(s,(function(e){return e===t})),c=null;switch(a){case i["c"].CallInProgressUpdationStatus.IN_PROGRESS:-1===u&&s.push(t);break;case i["c"].CallInProgressUpdationStatus.DONE:-1!==u&&s.splice(u,1);var d=parseInt(I(t).time,10);d&&(c=Date.now()-d);break}return{callsList:s,callBeingUpdated:t,updationType:a,callDoneTime:c}}function h(e){if(o.a.isString(e))return e;var t=o.a.isNumber(e.currentTryNum)?e.currentTryNum:y;return"".concat(e.eventName,".").concat(e.baseUniqueId,"|").concat(t,".").concat(e.time)}function I(e){if(o.a.isPlainObject(e))return e;var t=e.split(b),a=0,r=[];t[t.length-2]&&(t.length>=3?(r=t[t.length-2].split("|"),a=o.a.toNumber(r[r.length-1]),r.splice(r.length-1,1)):(r=t.slice(1),a=0));var n=r.join("|");return{eventName:t[0],baseUniqueId:n,currentTryNum:a,time:o.a.toNumber(t[t.length-1])||null}}function v(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={},n=I(e),s=q(n),o=0;o<t.length;o++){var i=I(t[o]),u=q(i),c=!1;c=a?i.eventName===n.eventName:u===s;var l=!n.baseUniqueId||n.baseUniqueId===i.baseUniqueId,m=!n.time||n.time===i.time;if(c&&l&&m){var p=i.baseUniqueId&&i.time?"".concat(i.baseUniqueId,"|").concat(i.time):i.baseUniqueId||i.time||o;r[p]?r[p]+=1:r[p]=1}}return{isIt:!Object(d["a"])(r),matches:r}}function A(e,t){var a=t.applicationContext,n=e.fetchOptions,s=Object(r["a"])({},n);return!s.headers&&(s.headers={}),Object(d["a"])(a.sessionDetails.csrf)||"GET"===n.method&&"HEAD"===n.method||!a.sessionDetails.csrf.header||(s.headers["X-CSRF-TOKEN"]=a.sessionDetails.csrf.header),Object(r["a"])(Object(r["a"])({},e),{},{fetchOptions:s})}function S(e){var t={};return function(e,a){var r=e.requestName;return g.includes(r)||0===g.length?t[r]?u["a"].getDifferenceInSeconds(Date.now(),t[r].firstCallTimestamp)>10?(t[r]={firstCallTimestamp:Date.now(),frequency:1},e):t[r].frequency>=f?(c["a"].logOnSentry(["request.LOOP_DETECTED",a.game],"exception","error"),delete t[r],e):(t[r].frequency+=1,e):(t[r]={firstCallTimestamp:Date.now(),frequency:1},e):e}}function T(e){if(Object(l["b"])()||Object(l["c"])()){var t=Object(m["a"])(),a=t.get(l["a"].COOKIE_NAME),r=p["a"].getItem(l["a"].LOCALSTORAGE_KEY)||"",n=a||r||"";n&&o.a.set(e,"fetchOptions.headers.x-auth-sessionid",n)}return e}function j(e){var t=Object(m["a"])(),a=t.get("QUIZIZZ_EXP_NAME");return a&&o.a.set(e,"fetchOptions.headers.experiment-name",a),e}function q(e){if(e.eventName){var t=e.eventName.split("/");return 1===t.length?t[0]:(t.splice(0,1),t.join("/"))}return""}},"77d5":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a("5530"),n=a("2909"),s=(a("99af"),a("2ef0")),o=a.n(s),i=a("f121"),u=a("0039"),c=a("8c18");function d(e,t){for(var a=e.user,s=e.routing.currentPage,d=e.notification.showOnceList,l=t.notification,m=!0,p=!1,g=!1,f=!1,b={},y={},O=Object(c["i"])({quizzes:l.quizzes,users:l.users,items:l.assigned}),h=o.a.get(l.assigned,"[0]._id"),I=0;I<a.attempts.groupAssignedGames.length;I++){var v=a.attempts.groupAssignedGames[I].gamesAttempted[0].gameInfo.roomHash;if(v===h){m=!1;break}}for(var A=0;A<d.length;A++)if("gameAssigned"===d[A].type){f=!0;break}if(m&&!f){b={groupAssignedGames:[].concat(Object(n["a"])(O.groupAssignedItems),Object(n["a"])(a.attempts.groupAssignedGames)),totalGroupAssignedGames:O.groupAssignedTotal+a.attempts.totalGroupAssignedGames,commonQuizzesData:Object(r["a"])(Object(r["a"])({},O.quizzes),a.attempts.commonQuizzesData),commonUsersData:Object(r["a"])(Object(r["a"])({},O.users),a.attempts.commonUsersData)};var S=i["r"].isExactly(s,i["r"].List.IN_GAME.SUMMARY);if(g=S||!Object(u["Ib"])(s),g){p=!S;var T=O.quizzes[o.a.get(O.groupAssignedItems,"[0].quizInfo.quizId","")]||{},j=o.a.get(O.groupAssignedItems,"[0].gamesAttempted[0].gameInfo",{}),q=j.assignmentTitle||"",N=j.lmsInfo,E=!1;l.assigned[0]&&o.a.isString(l.assigned[0].replayOf)&&""!==l.assigned[0].replayOf&&(E=!0),N&&N.lmsName&&(N=Object(r["a"])(Object(r["a"])({},N),{},{roomHash:j.roomHash,roomCode:j.gameCode})),y={id:"gameAssigned.".concat(Date.now()),showAs:"modal",type:i["c"].W_MODAL_TYPES.GAME_ASSIGNED_NOTIF,data:{assignedBy:O.users[j.host&&j.host.id]||null,gameSubject:T.subjects||[],gameInfo:j,lmsInfo:N,assignmentTitle:q,isReplayLiveGameModal:E}}}}return{mutationPayload:b,isANewAssignedGame:m,canShowNotification:g,notifItem:y,shouldUpdateGroupGames:p,isNotificationAlreadyPresent:f}}},8249:function(e,t,a){"use strict";a.d(t,"i",(function(){return b})),a.d(t,"h",(function(){return y})),a.d(t,"e",(function(){return O})),a.d(t,"j",(function(){return h})),a.d(t,"k",(function(){return v})),a.d(t,"f",(function(){return A})),a.d(t,"c",(function(){return S})),a.d(t,"d",(function(){return T})),a.d(t,"g",(function(){return j})),a.d(t,"l",(function(){return q})),a.d(t,"b",(function(){return N})),a.d(t,"a",(function(){return E}));var r=a("2909"),n=a("ade3"),s=a("5530"),o=(a("4de4"),a("d3b7"),a("caad"),a("2532"),a("7db0"),a("ddb0"),a("c740"),a("159b"),a("d81d"),a("b0c0"),a("ac1f"),a("5319"),a("498a"),a("2ef0")),i=a.n(o),u=a("1383"),c=a("95ac"),d=a("c7e0"),l=a("f121"),m=a("0039"),p=a("7c0f"),g=a("cc63"),f=a("3bb0");function b(e,t){var a=t.game,r=t.routing,n=l["r"].isExactly(r.currentPage,l["r"].List.IN_GAME.WAITING),s={roomHash:a.data.roomHash,playerId:a.player.playerId,gameType:a.data.gameType,gameState:a.data.gameState},o={gameData:s,startSource:l["k"].get(l["k"].List.RECONNECT_REJOIN)};return{shouldRejoinRoom:n,rejoinParams:o}}function y(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={},o=e.questions.questionResponseStatuses;if(Object(u["a"])(a)){if(!Object(u["a"])(t.currentQuestionCurrentAttemptResponse)){var c=o[t.currentQuestionCurrentAttemptResponse.questionId][t.currentQuestionCurrentAttemptResponse.attempt];c===l["c"].QuestionResponseStatuses.NOT_SENT&&(r=t.currentQuestionCurrentAttemptResponse)}}else r=a;var d=!Object(u["a"])(r),m=o;if(d){var p=i.a.isNumber(r.attempt)?r.attempt:0;m=Object(s["a"])({},o),m[r.questionId]=Object(s["a"])(Object(s["a"])({},m[r.questionId]),{},Object(n["a"])({},p,l["c"].QuestionResponseStatuses.SENDING))}return{allResponseStatuses:m,isCallRequired:d,responseToBeSent:r}}function O(e,t,a){var r=e.game,n=r.data,o=r.flow,c=r.player,d=r.team,g=r.questions,f=n.gameType,b=f===l["c"].GameType.SOLO,y=b?a.data:a,O=i.a.cloneDeep(r.questions.questionResponseStatuses),h=r.data.gameOptions,I=y.powerupEffects||[],v=y.breakRoomArr,A=a.mysticPeakLeaderboard,S=y.mysticPeakLevelBoard,T=a.mysticPeakTieredRank,j=i.a.filter(I,(function(e){return e.status===l["c"].PowerupEffectStatuses.DESTROYED})),q=i.a.get(y,"metadata.extraLife",[]),N=t.isAdaptiveLearningGame,E=y.breakRoomDifficulty||"",C=Object(s["a"])({},o.leaderboard.forQues),G=o.leaderboard,R=o.teamLeaderboard.list,w=o.leaderboard.totalPlayers,M=o.teamLeaderboard.totalTeams,k=n.teams,P=d.rank,L=d.score,z={},D={},Q={};if(!Object(u["a"])(y.response)){var _=y.response,H=Object(m["ob"])({extraLife:q,questionId:_.questionId}),x=i.a.isNumber(_.attempt)?_.attempt:0,F=i.a.pickBy(r.questions.questionResponses[_.questionId],(function(e,t){return"provisional"!==t}));if(C={id:_.questionId,attemptIndex:r.questions.questionResponses[_.questionId].length},Q=Object(s["a"])(Object(s["a"])({},i.a.get(y,"question",{})),{},{id:_.questionId,state:l["c"].SlideStates.REVEAL}),g.slidesFlowControlType===l["c"].SlidesFlowControlTypes.NONE&&delete Q.state,O[_.questionId][x]=l["c"].QuestionResponseStatuses.SENT,z=Object(s["a"])(Object(s["a"])(Object(s["a"])({},_),F),{},{isEvaluated:!0}),h.showAnswers!==l["c"].GameOptionsValues.ShowAnswers.NEVER){var U=t.totalQuestionAttempted,B=(t.allInteractiveSlidesOrderedResponses,c.marks),V=c.totalCorrect,Y=c.firstAttempts,W=c.firstCorrectAttempts,J=c.firstAttemptMarks;if(!l["i"].ANSWER_LATER_RESPONSE_STATES.includes(_.state)){if(_.isCorrect){var X=[l["c"].QuestionResultTypes.PARTIALLY_CORRECT,l["c"].QuestionResultTypes.CORRECT];if(i.a.isNumber(_.marks)&&_.marks>0){if(X.includes(_.result)){var K=r.questions.questionResponses[_.questionId];if(K&&K.length>1){var Z=K[K.length-2];B-=Z.marks||0}}B+=_.marks}if(X.includes(_.result)){var $=r.questions.questionResponses[_.questionId];$&&$.length>1&&$[$.length-2].isCorrect&&(V-=1)}V+=1}0===_.attempt&&(Y+=1,_.isCorrect&&(W+=1,i.a.isNumber(_.marks)&&_.marks>0&&(J+=_.marks)))}var ee=0,te=0,ae=N?c.totalPossibleMarks:n.totalPossibleMarks,re=N?h.questionsPerAttempt:n.totalQuestionsInQuiz;ae>0?(ee=Math.round(100*B/ae),te=Math.round(100*J/ae)):0===ae?(ee=Math.round(100*U/re),te=Math.round(100*Y/re)):(ee=Math.round(100*V/re),te=Math.round(100*W/re));var ne=c.currentSteak;ne=!Object(u["a"])(y.player)&&i.a.isNumber(y.player.currentStreak)?y.player.currentStreak:_.isCorrect?c.currentStreak+1:0,D={score:c.score+(H?0:_.score),marks:B,totalCorrect:V,currentStreak:ne,accuracy:ee,firstAttempts:Y,firstCorrectAttempts:W,firstAttemptMarks:J,firstAttemptAccuracy:te}}}switch(f){case l["c"].GameType.SOLO:var se=i.a.isNumber(n.accuracy)&&n.accuracy/100||.5,oe=Object(p["a"])(n.roomHash,c.playerId,D.score||0,c.monsterId,"leaderboard",n.gameOptions,t.totalQuestionAttempted,se);G=oe;break;default:if(y.leaderboard&&y.leaderboard.length&&(G=Object(m["ib"])(y.leaderboard),C={id:r.questions.currentId,attemptIndex:t.currentQuestionCurrentAttemptIndex}),y.teamLeaderboard&&y.teamLeaderboard.length>0){R=Object(m["jb"])(y.teamLeaderboard,n.teams),C={id:r.questions.currentId,attemptIndex:t.currentQuestionCurrentAttemptIndex};var ie=d.teamId,ue=i.a.find(R,(function(e){return e.teamId===ie}));if(ue){k=i.a.cloneDeep(k);var ce=i.a.find(k,(function(e){return e.teamId===ie}));ce&&(ce.score=ue.score),L=ue.score,P=ue.rank}}w=y.playerCount||Math.max(o.leaderboard.totalPlayers,G.length>0&&G[G.length-1].rank||0),M=y.teamCount||Math.max(o.teamLeaderboard.totalTeams,R.length>0&&R[R.length-1].rank||0)}var de=Object(m["S"])(O,[l["c"].QuestionResponseStatuses.SENDING,l["c"].QuestionResponseStatuses.NOT_SENT]),le=0===r.questions.remainingOrder.length&&0===i.a.keys(de).length;return{leaderboard:G,totalPlayers:w,forQues:C,currentPlayerRank:Object(m["R"])(G,c.playerId),previousPlayerRank:c.rank,teamLeaderboard:R,totalTeams:M,teams:k,currentTeamScore:L,currentTeamRank:P,previousTeamRank:d.rank,powerupEffects:I,powerupEffectsDestroyed:j,allResponseStatuses:O,allResponsesSent:le,updatedResponse:z,playerStats:D,updatedSlide:Q,extraLife:q,breakRoomArr:v,mysticPeakLevelBoard:S,mysticPeakTieredRank:T,currentDifficulty:E,mysticPeakLeaderboard:A}}function h(e,t,a,r){var n=e.game,s=n.data,o=s.gameMode,c=s.gameType,d=s.gameOptions,m=s.roomHash,p=s.quizVersionId,g=Array.isArray(r),b=d.updatedAt,y={roomHash:m,playerId:n.player.playerId,response:a,questionId:n.questions.currentId,powerupEffects:{destroy:[]},gameType:c,gameOptionsUpdatedAt:b,quizVersionId:p};if(c===l["c"].GameType.ASYNC){var O=0;t.allOrderedResponses.length||(O=C(t.allOrderedResponses)),y.elapsed=O}if(o!==l["c"].GameMode.CHALLENGE||t.areQuestionAttemptsLeft||(y.isLastPlayerResponse=!0),o===l["c"].GameMode.PRESENTATION&&(c===l["c"].GameType.ASYNC||c===l["c"].GameType.SOLO)&&!Object(u["a"])(n.questions.remainingOrder)){var h=n.questions.remainingOrder[0],I=i.a.findIndex(n.questions.initSequence,(function(e){return e===h}));y.metadata={qId:h,qIdIndex:I}}return f["a"].invariant(g,["setDataForProceedGame: powerupEffectsToDestroy is not valid. Recieved - ",r],{logOnSentry:!0}),i.a.forEach(r,(function(e){var t=!Object(u["a"])(e);f["a"].invariant(t,["setDataForProceedGame: powerupEffect is not valid. All effects recieved - ",r],{logOnSentry:!0}),t&&y.powerupEffects.destroy.push(e)})),y}function I(e){var t=[e.data.gameType,e.data.gameMode,e.data.gameOptions];if(e.data.gameOptions.hasRedemptionPass===l["c"].GameOptionsValues.hasRedemptionPass.YES){var a=l["v"].shouldShowRedemptionQuestion.apply(l["v"],t);return a}return l["u"].shouldShowRedemptionQuestion.apply(l["u"],t)}function v(e,t,a){var n=e.game,o=e.appSettings,c=n.data,d=c.gameType,m=(c.gameMode,c.gameOptions,c.roomHash),p=n.player.playerId,g=Object(r["a"])(n.questions.remainingOrder),f=Object(r["a"])(n.questions.answerLaterQuestions),b=n.questions.currentId,y=a.doneOrderForEvaluatedQuestions,O=""===b,h=a.isMasteryMode,v={roomHash:m,gameType:d,playerId:p},A=!1,S={},T=!1,j=b,q=!1,N=g.length>0,E=[],C=[],G=!1;if(h&&!t&&(N=g.length>0||""!==b),t&&I(e.game))q=!0,T=!0,N=!0,j="";else if(N){j=g.shift(),O||y.push(b);var R=i.a.find(n.questions.list,(function(e){return e.id===j})),w=i.a.isObject(R)?R.options:[],M=(null===R||void 0===R?void 0:R.type)===l["c"].QuestionTypes.CONTENT_SLIDE||(null===R||void 0===R?void 0:R.type)===l["c"].QuestionTypes.CONTENT_SLIDE_V2,k=M&&!Object(u["a"])(i.a.get(R,"structure.bullets"));T=j in n.questions.list,E=i.a.map(w,(function(){return{isVisible:!0}})),C=q?["game"]:["game","question"],o.readAloud&&n.questions.slidesFlowControlType!==l["c"].SlidesFlowControlTypes.NONE&&k&&(A=!0,S=Object(s["a"])(Object(s["a"])({},R),{},{metadata:Object(s["a"])(Object(s["a"])({},R.metadata||{}),{},{currentBulletIndex:R.structure.bullets.length-1})}))}else f.length>0&&(T=!0,N=!0,g=Object(r["a"])(n.questions.answerLaterQuestions),j=g.shift(),G=!0);var P={questionId:j,doneOrder:y,remainingOrder:g,currentOptionsAppearance:E,powerupScopes:C};return{mutationPayload:P,areThereQuestionsLeftToShow:N,isQuestionToShowValid:T,shouldShowRedemptionQuestion:q,gameData:v,shouldUpdateSlide:A,updatedSlide:S,showingAnswerLaterQuestions:G}}function A(e,t){var a={},n={},s=e.questions,o=s.remainingOrder,i=s.currentId,u=s.answerLaterQuestions,l=s.questionResponses,p=e.flow.breakRoomArr,g=e.data,f=g.gameType,b=g.gameMode,y=(g.gameOptions,g.mysticPeakLevelMap),O=e.player,h=(O.playerId,O.totalCorrect),v=Object(r["a"])(o),A=i,S=Object(r["a"])(e.questions.doneOrder),T=t.doneOrderForEvaluatedQuestions,j=v.length<1&&e.data.gameOptions.reviewAndSubmit,q=Object(r["a"])(u),N=!j&&v.length<1&&q.length>0,E=!N&&I(e);Object(m["a"])({gameType:f,gameMode:b,isMasteryMode:t.isMasteryMode})&&(E=!1);var C=t.isCurrentQuestionSkipped?{}:Object(m["N"])(l,i),G=Object(d["h"])({gameMode:b,breakRoomArr:p}),R=G.shouldShow,w=o.length>0,M=(t.isCurrentQuestionSkipped||Object(m["lb"])(C))&&w&&R,k=h===y[y.length-1],P=!1;return P=!(!t.isMasteryMode||(S.length+1)%c["a"].SHOW_LEADERBOARD_AFTER_EVERY_NTH_QUESTION!==0),j&&(T.push(A),a={questionId:"",doneOrder:T,remainingOrder:v,powerupScopes:["game"]}),E&&(T.push(A),a={questionId:"",doneOrder:T,remainingOrder:v,currentOptionsAppearance:[],powerupScopes:["game"]}),N&&(T.push(A),n={questionId:"",doneOrder:T,remainingOrder:v,powerupScopes:["game"]}),{shouldShowRedemptionQuestion:E,mutationPayload:a,shouldShowAnswerLaterQuestions:N,answerLaterMutationPayload:n,shouldShowBreakRoom:M||k,hasReachedMasteryForMysticPeak:k,shouldShowReviewQuestions:j,shouldShowMasteryCountdown:P}}function S(e){var t=e.state,a=e.getters,r=e.id,n=void 0===r?null:r,o=e.name,i=void 0===o?"":o,u=e.meta,c=void 0===u?{}:u,d=t.player.playerId,l=t.data.roomHash,m=g["a"].getConfig(),p=m[i].meta,f={id:n,powerupId:n,playerId:d,roomHash:l,meta:{},gameType:t.data.gameType,name:i};return p.push("playerId","monsterId"),f.meta=Object(s["a"])({},T({state:t,name:i,metaProps:p,getters:a,meta:c})),f.meta.player={playerId:t.player.playerId,monsterId:t.player.monsterId},f}function T(e){var t=e.state,a=e.name,r=e.metaProps,n=e.getters,s=e.meta,o=g["a"].getConfig(),u={};return i.a.forEach(r,(function(e){"questionId"===e&&(u.questionId=t.questions.currentId),"attempt"===e&&(u.attempt=n.currentQuestionCurrentAttemptIndex),"startTime"===e&&(u.startTime=(new Date).getTime()),"scoreChange"===e&&(u.scoreChange=o[a].scoreChange),"powerupsToActivate"===e&&(u.boxPowerups=o[a].powerupsToActivate),"playerId"===e&&(u.playerId=t.player.playerId),"monsterId"===e&&(u.monsterId=t.player.monsterId),"targets"===e&&(u.targets=s.targets||[]),"streakChangeBy"===e&&(u.streakChangeBy=o[a].streakChangeBy)})),u}function j(e,t,a){var n=e.game,s=e.appSettings,o=n.questions.currentId,c=t.currentQuestion,d={currentOptionsAppearance:[],powerupScopes:["game","question"]},m=!0===s.readAloud,p=!1,g=!1,f=!1,b=!1,y=!1,O={},h={},I=e.game.data.gameState===l["c"].GameState.COMPLETED,v=e.game.player.isOver,A=i.a.get(c,"structure.bullets",[]),S=i.a.get(c,"metadata.currentBulletIndex",-1),T=A.length,j=T>=0,q="forward"===a?S+1:S-1,N=t.isCurrentSlideInteractable||!j||"backward"===a||q<0||q>=T;if("backward"===a&&t.currentQuestionNumber<=1)p=!0;else if("forward"===a&&Object(u["a"])(n.questions.remainingOrder)&&N)g=!0;else{var E="";if(E="forward"===a?n.questions.remainingOrder[0]:n.questions.initSequence[t.currentQuestionNumber-1-1],t.isCurrentSlideForContent&&!N&&(f=!0,O={id:o,state:c.state,metadata:{currentBulletIndex:q}}),N){var C=n.questions.list[E],G=i.a.get(C,"structure.bullets",[]).length,R=C.type===l["c"].QuestionTypes.CONTENT_SLIDE,w=Object(r["a"])(n.questions.remainingOrder),M=Object(r["a"])(n.questions.doneOrder);if("forward"===a?w.shift():w.unshift(o),M.push(o),b=!0,d.questionId=E,d.doneOrder=M,d.remainingOrder=w,!t.isCurrentSlideForContent||I||v||(y=!0,h={questionId:E}),R){var k="forward"!==a||m?G-1:-1;if(G>0){var P=i.a.get(C,"structure.title.text",""),L=i.a.replace(P,"<p><br /></p>",""),z=!Object(u["a"])(L.trim());z||-1===k&&"forward"===a&&(k=0)}f=!0,O={id:E,state:C.state,metadata:{currentBulletIndex:k}}}}}return{isNotAllowedToProceed:p,areQuestionsOver:g,shouldUpdateSlideState:f,updateSlidePayload:O,shouldUpdateCurrentSlide:b,setCurrentQuestionMutationPayload:d,isGameCompleted:I,shouldUpdatePlayerMetadata:y,updateMetadataPayload:h}}function q(e,t){var a=t.gameState||"",r=e.data.gameState,n=i.a.find(e.questions.list,(function(e){return!i.a.includes([l["c"].SlideStates.INACTIVE,l["c"].SlideStates.COMPLETED],e.state)})),s=!1,o=!1,c=!1,d={};if(a){var m=a===l["c"].GameState.STOPPED||a===l["c"].GameState.COMPLETED;s=r===l["c"].GameState.RUNNING&&m,o=e.questions.slidesFlowControlType===l["c"].SlidesFlowControlTypes.NONE}return Object(u["a"])(n)||(c=!0,d={nextQuestion:{questionId:n.id}}),{shouldEndGame:s,areAllPlayerSlidesDone:o,shouldUpdateSlide:c,updateSlidePayload:d}}function N(e,t,a){var r=!Object(u["a"])(t.currentQuestionCurrentAttemptResponse),n={},o={};if(r){var c=Object(m["S"])(e.questions.questionResponseStatuses,[l["c"].QuestionResponseStatuses.NOT_SENT]),d=Object(s["a"])(Object(s["a"])({},i.a.cloneDeep(t.currentQuestionCurrentAttemptResponse)),{},{response:a});n={playerStats:{score:t.currentQuestionCurrentAttemptResponse.score,marks:t.currentQuestionCurrentAttemptResponse.marks,accuracy:e.player.accuracy,totalCorrect:e.player.totalCorrect,currentStreak:e.player.currentStreak},response:d,questionType:t.currentQuestion.type,updatedLeaderboardList:e.flow.leaderboard.list,powerupScopes:["game"],responsesRemaining:i.a.keys(c).length,shouldStoreResponseStatus:!1},o={questionId:e.questions.currentId,roomHash:e.data.roomHash,playerId:e.player.playerId,response:d}}return{hasCurrentQuestionBeenAnswered:r,mutationPayload:n,updateResponsePayload:o}}function E(e){return i.a.map(e,(function(e){return{id:e._id,name:e.name,status:e.status,meta:e.meta}}))}function C(e){var t=e,a=0;i.a.forEach(t,(function(e){a+=e.timeTaken}));var r=1e3*t,n=1e3*t;return a+r+n}},"8c18":function(e,t,a){"use strict";a.d(t,"d",(function(){return p})),a.d(t,"i",(function(){return g})),a.d(t,"c",(function(){return f})),a.d(t,"a",(function(){return b})),a.d(t,"j",(function(){return y})),a.d(t,"g",(function(){return O})),a.d(t,"f",(function(){return h})),a.d(t,"e",(function(){return I})),a.d(t,"b",(function(){return v})),a.d(t,"h",(function(){return A}));var r=a("5530"),n=a("2909"),s=(a("d3b7"),a("159b"),a("c740"),a("d81d"),a("4de4"),a("b0c0"),a("a9e3"),a("b680"),a("2ef0")),o=a.n(s),i=a("1383"),u=a("f121"),c=a("7eda"),d=a("0039"),l=a("4871"),m=a("0b05");function p(e,t,a,r){var n="runningGames"===e?t.totalRunningGames:t.totalCompletedGames,s="runningGames"===e?t.runningGames:t.completedGames,i=n>-1,u=o.a.isNumber(r)?r:s.length,c=i&&s.length>=n;return{hasBeenFetchedEvenOnce:i,startAt:u,hasAllListBeenFetched:c,pageSize:a}}function g(e,t,a){var r=e.items.length,n=0,s={},i=[],u=[],c={};o.a.forEach(e.quizzes,(function(e,t){c[t]=S(e)})),o.a.forEach(e.users,(function(e,t){s[t]=T(e)}));var d=[],l=[];return o.a.forEach(e.items,(function(e,t){!0===e.isGroupAssigned?l.push(e):d.push(e)})),i=R(d,!1),u=R(l,!0),n=u.length,{items:o.a.orderBy(i,(function(e){return N(e.gamesAttempted[0])}),"desc"),groupAssignedItems:o.a.orderBy(u,(function(e){return N(e.gamesAttempted[0])}),"desc"),quizzes:c,users:s,total:r,groupAssignedTotal:n,pageSize:t,startAt:a}}function f(e,t,a){var r=e.total,n={},s=[],i={};return o.a.forEach(e.items,(function(e){var t=Array.isArray(e.latestAttempts)?e.latestAttempts[0]:e.latestAttempts,a=[{attempts:[j(t),e.quizInfo],gameInfo:q(t,u["c"].GameState.COMPLETED,[e.latestAttempts])}],r={quizInfo:null,numAttempts:e.numAttempts,areAllAttemptsFetched:!1,gamesAttempted:a,totalPossibleMarks:e.totalPossibleMarks};e.quizInfo&&(r.quizInfo={quizId:e.quizInfo.quizId,verId:e.quizInfo.versionId,traits:e.quizInfo.traits},i[e.quizInfo.quizId]=S(e.quizInfo)),t.host&&t.host.userId&&(n[t.host.userId]=T(t.host)),s.push(r)})),{items:o.a.orderBy(s,(function(e){return N(e.gamesAttempted[0])}),"desc"),quizzes:i,users:n,total:r,pageSize:t,startAt:a}}function b(e,t){var a=t.quizInfo.quizId,s=Object(n["a"])(e.completedGames),i=o.a.findIndex(s,(function(e){return e.quizInfo.quizId===a})),c=o.a.map(t.games,(function(e){var a=o.a.map(e.attempts,(function(a){return j(a,e,t.quizInfo)})),r={gameInfo:q(e,u["c"].GameState.COMPLETED,e.attempts),attempts:o.a.orderBy(a,"dateJoined","desc")};return r}));return s[i]=Object(r["a"])(Object(r["a"])({},s[i]),{},{gamesAttempted:o.a.orderBy(c,N,"desc"),numAttempts:t.numAttempts,areAllAttemptsFetched:!0}),{forQuizId:a,updatedCompletedGames:s,didLatestGameHaveLimitedAttempts:s[i].gamesAttempted[0].gameInfo.options.limitAttempts>0}}function y(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[],r=0;r<e.length&&r<u["c"].RecentActivityConfig.MAX_RUNNING_GAMES&&a.length<u["c"].RecentActivityConfig.MAX_ATTEMPTS;r++)a.push({list:"running",index:r,data:o.a.clone(e[r])});for(var n=0;n<t.length&&n<u["c"].RecentActivityConfig.MAX_COMPLETED_GAMES&&a.length<u["c"].RecentActivityConfig.MAX_ATTEMPTS;n++)a.push({list:"completed",index:n,data:o.a.clone(t[n])});return a=o.a.orderBy(a,[function(e){return"running"===e.list},function(e){return N(e.data.gamesAttempted[0])}],["desc","desc"]),{list:o.a.map(a,(function(e){return E(e.data,e.index,e.list)}))}}function O(e,t){var a=e.l,n=e.i,s=e.q,i=t[a][n]?t[a][n].quizInfo:null;if(i&&i.quizId===s)return Object(r["a"])(Object(r["a"])({},t[a][n]),{},{fromList:a});var u=o.a.findIndex(t[a],(function(e){return e.quizInfo&&e.quizInfo.quizId===s}));return-1!==u?Object(r["a"])(Object(r["a"])({},t[a][u]),{},{fromList:a}):null}function h(e,t,a){for(var n=[],s=e.data.quiz.info.questions,o=0;o<3&&o<s.length;o++)n[o]=Object(r["a"])({},s[o].structure.query);return{quizId:t,listType:a,updatedData:{questions:n}}}function I(e){var t=[];return o.a.forEach(e,(function(e){o.a.forEach(e.attempts,(function(a){o.a.has(a,"numQuesAttempted")&&0!==a.numQuesAttempted&&a.playerId&&(a.roomHash=e.gameInfo.roomHash,t.push(a))}))})),t}function v(e,t){var a=e.roomHash,r=e.playerId,n=t.currentAttempts,s=t.currentGameData;if(s.roomHash!==a)return n;var i=o.a.cloneDeep(n),u=o.a.findIndex(i,(function(e){return e.playerId===r}));return i[u].isOver=!0,i}function A(e,t){var a=[],r=0;if(e.success){var n=o.a.filter(e.data.hits,(function(e){return e.hasDraftVersion||e.hasPublishedVersion}));a=n.map((function(e){return Object(m["a"])(e,!0)})),r=e.data.total}return{success:e.success,quizzes:a,totalQuizzes:r,page:t}}function S(e){return{name:e.name,creator:{id:e.creator},image:e.image,subjects:e.subjects,grades:e.grades,avgAccuracy:Number((e.stats.totalCorrect/e.stats.totalQuestions).toFixed(2)),totalPlayersJoined:e.stats.totalPlayers,questions:null,numOfQuestions:e.numOfQuestions||0,traits:e.traits||{},type:Object(d["bb"])(e)}}function T(e){return{mongoId:e.userId,username:e.username,occupation:e.occupation||null,fullName:C(e),image:e.image||""}}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=w([e],t);return{playerId:e.playerId,dateJoined:e.createdAt&&new Date(e.createdAt)||null,numQuestions:r,numAnswerableQuestions:M([e],t,a),numQuesAttempted:e.numAttempted,numCorrect:e.numCorrect,isOver:!Object.hasOwnProperty.call(e,"isOver")||e.isOver,lastPlayedAt:e.lastPlayedAt&&new Date(e.lastPlayedAt)||null,isLMSAttempt:G(e),isPlayerDeleted:o.a.isBoolean(e.deleted)?e.deleted:null,gameType:Object(d["H"])(t.gameType),gameMode:Object(d["F"])(t.gameType),marks:e.marks,totalPossibleMarks:e.totalPossibleMarks}}function q(e,t,a){var r=o.a.filter(a,G),n=w(a,e),s=!!r.length,c=Array.isArray(e.groupIds)?e.groupIds:[],l=e.groupsInfo||{},m=e.options||{},p=u["c"].GameGroupType.NONE,g=null;if(s&&(g=o.a.clone(r[0].assignment)),c.length>0){var f=l.create&&l.create.token;p=f?u["c"].GameGroupType.GROUP_CREATION:u["c"].GameGroupType.ONLY_ASSIGNED}return{roomHash:e.gameId?e.gameId:e._id?e._id:null,gameType:Object(d["H"])(e.gameType),gameMode:Object(d["F"])(e.gameType),gameCode:e.hasOwnProperty("gameCode")&&e.gameCode||null,gameState:e.gameState||t,gameCreatedAt:e.createdAt?new Date(e.createdAt):e.assignedDate?new Date(e.assignedDate):null,dueDate:e.dueDate&&new Date(e.dueDate)||null,host:e.host&&!Object(i["a"])(e.host)?{id:e.host.userId}:e.hostId?{id:e.hostId}:{},hasLMSAttempts:s,lmsInfo:g,groupIds:c,isOnlyAssigned:!0===e.isGroupAssigned,groupType:p,assignmentTitle:e.assignmentTitle,numQuestions:n,options:{limitAttempts:o.a.isNumber(m.limitAttempts)?m.limitAttempts:0}}}function N(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t&&e.gameInfo.dueDate?e.gameInfo.dueDate:e.attempts[0]&&e.attempts[0].dateJoined||e.gameInfo.gameCreatedAt||null}function E(e,t,a){return{l:a,i:t,q:e.quizInfo&&e.quizInfo.quizId||""}}function C(e){return(Object(c["b"])(e.occupation)&&e.title&&"".concat(e.title," ")||"")+Object(l["b"])(e,!1,"")}function G(e){return!(!e.assignment||Object(i["a"])(e.assignment))}function R(e,t){return o.a.map(e,(function(e,a){var r=[];t||(r=o.a.map(e.attempts,(function(t){return j(t,e,e)})));var n={quizInfo:{quizId:e.quizId,verId:e.versionId,traits:e.traits},totalPossibleMarks:e.totalPossibleMarks,currentQuestionIndex:o.a.get(e,"currentQuestionIndex",-1),numAttempts:e.attempts.length,areAllAttemptsFetched:!0,gamesAttempted:[{attempts:o.a.orderBy(r,"dateJoined","desc"),gameInfo:q(e,u["c"].GameState.RUNNING,e.attempts)}]};return n}))}function w(e,t){var a=o.a.get(t,"options.questionsPerAttempt",0);return a>0?a:e[0]&&o.a.isNumber(e[0].numQuestions)?e[0].numQuestions:-1}function M(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o.a.get(t,"options.questionsPerAttempt",0);if(r>0)return r;if(o.a.isNumber(t.totalAnswerableQuestions))return t.totalAnswerableQuestions;var n=w(e,t),s=o.a.get(a,"traits.totalSlides",-1);return s>=0?n-s:n}},a7cf:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return l}));var r=a("5530"),n=(a("4de4"),a("d3b7"),a("7db0"),a("d81d"),a("c740"),a("2ef0")),s=a.n(n),o=a("1383"),i=a("f121"),u=(a("5350"),a("0039"));a("3bb0"),a("4871");function c(e,t){var a=e.game,r=e.routing,n=a.player.playerId!==t.playerId,o={players:a.data.players,teams:a.data.teams,isOldPlayerFromCurrentTeam:!1};n&&(o.players=s.a.filter(a.data.players,(function(e){return e.playerId!==t.playerId})),a.data.gameMode===i["c"].GameMode.TEAM&&(Array.isArray(t.teams)&&t.teams.length===a.data.teams.length&&(o.teams=t.teams),t&&t.teamId===a.team.teamId&&(o.isOldPlayerFromCurrentTeam=!0)));var u=a.data.gameMode===i["c"].GameMode.CHALLENGE,c=i["r"].isExactly(r.currentPage,i["r"].List.IN_GAME.CHALLENGE_PRE_SUMMARY),d=u&&c,l=s.a.get(a,"flow.challengeLiveLeaderboard",[]);return d&&(l=s.a.filter(l,(function(e){return e.playerId===t.playerId}))),{isAnotherPlayerDeleted:n,payload:o,shouldDeletePlayerFromChallengeLeaderboard:d,challengeLiveLeaderboard:l}}function d(e,t){var a=e.game,r=a.player.rank,n=r;t&&t.leaderboard&&t.leaderboard.length>0&&(r=Object(u["R"])(t.leaderboard,a.player.playerId));var c=a.team.rank,d=a.team.previousRank,l=a.team.score,m=t&&t.teams||[];if(m.length>0){d=c;var p=Object(u["eb"])(m),g=s.a.find(p,(function(e){return e.teamId===a.team.teamId}));c=g.rank,l=g.score}var f={previousPlayerRank:n,currentPlayerRank:r,previousTeamRank:d,currentTeamRank:c,currentTeamScore:l};return m.length>0&&(f.teams=m),Object(o["a"])(t.leaderboard)||(f.leaderboard=t.leaderboard,f.shouldUpdateLeaderboard=a.data.gameMode===i["c"].GameMode.CHALLENGE),f}function l(e,t){var a=e.game,n=a.data,u=a.player,c=a.flow,d=s.a.get(n,"gameMode","")===i["c"].GameMode.CHALLENGE,l=s.a.get(n,"gameState","")===i["c"].GameState.RUNNING,m=!1,p=c.challengeLiveLeaderboard,g=u.rank;if(!Object(o["a"])(t.player)){var f=s.a.pick(t.player,["id","score","monsterId","origin","currentStreak","totalAttempt","totalCorrect","totalResponses","isOver"]);f.playerId=f.id,delete f.id,p=s.a.map(c.challengeLiveLeaderboard,(function(e){return e.playerId===t.player.id?Object(r["a"])(Object(r["a"])({},e),f):e})),p=s.a.map(s.a.orderBy(p,["score"],["desc"]),(function(e,t){return Object(r["a"])(Object(r["a"])({},e),{},{rank:t+1})})),m=d&&l,g=s.a.findIndex(p,{playerId:u.playerId})+1}return{shouldUpdateLeaderboard:m,leaderboard:p,currentPlayerRank:g}}},a9ba:function(e,t,a){"use strict";a.d(t,"c",(function(){return v})),a.d(t,"d",(function(){return A})),a.d(t,"a",(function(){return S})),a.d(t,"b",(function(){return T})),a.d(t,"e",(function(){return j})),a.d(t,"l",(function(){return q})),a.d(t,"m",(function(){return N})),a.d(t,"k",(function(){return E})),a.d(t,"n",(function(){return C})),a.d(t,"o",(function(){return G})),a.d(t,"q",(function(){return R})),a.d(t,"r",(function(){return w})),a.d(t,"f",(function(){return M})),a.d(t,"p",(function(){return k})),a.d(t,"h",(function(){return P})),a.d(t,"i",(function(){return L})),a.d(t,"j",(function(){return z})),a.d(t,"g",(function(){return D}));var r=a("5530"),n=(a("d401"),a("d3b7"),a("25f0"),a("e25e"),a("b64b"),a("a15b"),a("99af"),a("b0c0"),a("2ef0")),s=a.n(n),o=a("1383"),i=a("f121"),u=a("3bb0"),c=a("cc63"),d=a("e56d"),l=a("7c0f"),m=a("0039"),p=a("420f"),g=a("3a01"),f=a("2909"),b=(a("caad"),a("2532"),a("d81d"),a("07ac"),a("7db0"),a("c740"),a("fb6a"),a("4de4"),a("159b"),a("13d5"),a("ae90")),y=a("59e1");function O(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",u={},c=I(a),d=Object(m["H"])(s.a.get(c,"room.type")),l=Object(m["F"])(s.a.get(c,"room.type")),g=Object(m["db"])(d,l),f=t;switch(t||(f=Object(m["kb"])(d)?"live-async":"solo"),f){case"solo":!s.a.isNumber(c.player.monsterId)&&s.a.isNumber(c.player.monster)&&(c.player.monsterId=c.player.monster);case"live-async":var O=s.a.pickBy(c.room,(function(e,t){return!s.a.includes(["options","questions","questionIds"],t)})),v=s.a.clone(c.player),A=s.a.get(c,"room.teams",[]),S=O.totalAnswerableQuestions,T=s.a.get(O,"traits.totalSlides",null);s.a.isNumber(S)||(S=s.a.isNumber(T)?c.room.questions.length-T:c.room.questions.length);var j=S,q=h(c,n),N=q.questionIds,E=q.questions,C=q.remainingQuestionsOrder,G=q.doneOrder,R=q.questionResponses,w=q.skippedQuestions,M=q.extraLifeQuestions,k=q.answerLaterQuestions,P=q.shouldShowReviewScreen,L=q.correctQuestionAttempts,z=q.incorrectQuestionAttempts,D=q.isAdaptiveLearningGame,Q={type:i["c"].GameGroupType.NONE,ids:Array.isArray(O.groupIds)?O.groupIds:[],createToken:s.a.get(O.groupsInfo,"create.token")||null,sourceRequest:""},_=[];O.totalQuestionsInQuiz=j,O.questionIds=N,O.questions=E,O.options=s.a.isString(c.room.options)?JSON.parse(c.room.options):c.room.options,O.options=Object(p["m"])(O.options),O.players=s.a.map(O.players,b["a"]),v.responses=R,v.remainingQuestionsOrder=C,v.doneOrder=G,v.skippedQuestions=w,v.extraLife=M,v.score=c.player.score,v.marks=c.player.marks,v.longestStreak=c.player.maximumStreak||0,v.answerLaterQuestions=k,v.shouldShowReviewScreen=P,v.incorrectQuestionAttempts=z,v.correctQuestionAttempts=L,v.powerups=s.a.map(v.powerups,(function(e){return{id:e._id,name:e.name,status:e.status,meta:e.meta}})),v.powerupEffects=s.a.map(v.powerupEffects,(function(e){return{id:e._id,name:e.name,status:e.status,meta:e.meta,powerupId:e.powerupId}})),s.a.isNumber(c.player.totalCorrect)?v.totalCorrect=c.player.totalCorrect:d===i["c"].GameType.SOLO?v.totalCorrect=s.a.isNumber(c.room.totalCorrect)?c.room.totalCorrect:0:v.totalCorrect=0,(!v.responses||v.responses.length<=0)&&(v.marks=0),v.marks||(v.marks=0,s.a.map(v.responses,(function(e){s.a.map(e,(function(e){v.marks+=e.isCorrect&&s.a.isNumber(e.marks)?e.marks:0}))})));for(var H=0,x=0,F=0,U=s.a.flatten(Object.values(v.responses)),B=0;B<U.length;B+=1)0===U[B].attempt&&(H+=1,U[B].isCorrect&&(x+=1),U[B].marks>0&&(F+=U[B].marks));v.firstAttempts=H,v.firstCorrectAttempts=x,v.firstAttemptMarks=F;var V=D?v.totalPossibleMarks:O.totalPossibleMarks,Y=D?O.options.questionsPerAttempt:j;if(V>0?(v.accuracy=Math.round(100*v.marks/V),v.firstAttemptAccuracy=Math.round(100*v.firstAttemptMarks/V)):0===V?(v.accuracy=Math.round(100*v.totalAttempt/Y),v.firstAttemptAccuracy=Math.round(100*v.firstAttempts/Y)):(v.accuracy=Math.round(100*v.totalCorrect/Y),v.firstAttemptAccuracy=Math.round(100*v.firstCorrectAttempts/Y)),s.a.isNil(O.quizId)&&(O.quizId=""),s.a.isNil(O.quizName)&&(O.quizName=""),v.teamId){var W=Object(m["eb"])(A),J=s.a.find(W,(function(e){return e.teamId===v.teamId}));J&&(v.currentTeamName=J.teamName,v.currentTeamRank=J.rank,v.currentTeamTotalPlayers=J.totalPlayers,v.currentTeamScore=J.score)}if(l===i["c"].GameMode.PRESENTATION&&!Object(o["a"])(v.remainingQuestionsOrder)){var X=s.a.findIndex(O.questionIds,(function(e){return e===v.remainingQuestionsOrder[0]})),K=X-1;K>=0&&(v.doneOrder=s.a.slice(O.questionIds,0,K+1))}Q.ids.length>0&&(Q.type=Q.createToken?i["c"].GameGroupType.GROUP_CREATION:i["c"].GameGroupType.ONLY_ASSIGNED,Q.sourceRequest=e),O.groupData=Q,O.teams=A,u.room=O,u.player=v,u.questionStates=c.questionStates,u.question=c.question,u.isAChallengeGame=O.type===i["c"].GameMode.CHALLENGE,u.leaderboard=[],u.isAChallengeGame&&(_=s.a.orderBy(s.a.get(c,"room.players",[]),["score"],["desc"]),_=s.a.map(_,(function(e,t){return Object(r["a"])(Object(r["a"])({},s.a.pick(e,["playerId","monsterId","score","origin","currentStreak","totalAttempt","totalCorrect","totalResponses","isOver"])),{},{rank:t+1,isProfane:Object(y["a"])(e.playerId)})})),u.leaderboard=_);break}return u.room.type=d,u.room.mode=l,u.room.slidesFlowControlType=g,c.forcedRedirect&&(u.forcedRedirect=c.forcedRedirect),s.a.cloneDeep(u)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=e.room,r=void 0===a?{}:a,n=e.player,u=void 0===n?{}:n,c=Object(m["H"])(r.type),d=Object(m["F"])(r.type),l=r.state,b=Object(m["db"])(c,d),y=b===i["c"].SlidesFlowControlTypes.PARTIAL,O=!y,h=s.a.isString(r.options)?JSON.parse(r.options):r.options,I=Object(p["m"])(h),v=s.a.isNumber(I.questionsPerAttempt)&&I.questionsPerAttempt>=1,A=Object(m["Pb"])(r.questions,{dataIsStrigified:!1,forGameBeingPlayed:!0,slidesFlowControlType:b}),S=Object(m["cb"])(r,u),T=Object(m["E"])(r,u),j=Object(m["D"])(r,u),q=I.masteryMode&&!Object(o["a"])(I.masteryMode),N=i["i"].MASTERY_MODE_REATTEMPTS.unlimited;q&&(N=i["i"].MASTERY_MODE_REATTEMPTS[I.masteryMode.reattempts]);var E=r.questionIds,C=[],G=[],R=[],w=u.responses,M=I.reviewAndSubmit&&Object(m["Ub"])(c,d,w,r.questionIds.length),k=Object(m["w"])(w,M),P=Object(m["K"])(w),L=Object(m["B"])(w);if(d===i["c"].GameMode.FLASHCARD&&(E=s.a.filter(E,(function(e){var t=A[e];return Object(m["n"])(t)&&(t.type===i["c"].QuestionTypes.MCQ||t.type===i["c"].QuestionTypes.MSQ||t.type===i["c"].QuestionTypes.BLANK||t.type===i["c"].QuestionTypes.EQUATION)}))),v){var z=u.questions,D=[];s.a.forEach(E,(function(e){s.a.includes(z,e)&&D.push(e)})),E=D}var Q=Object(m["a"])({gameMode:d,gameType:c,isMasteryMode:q}),_=d;q&&(_=i["c"].GameMode.MASTERY_MODE);var H=Object(g["a"])(u.responses,E,u.scoreTrail,b,Q,_);R=H.answeredQuestions,G=s.a.clone(E),C=E,Object(o["a"])(H.questionResponses)||(w=H.questionResponses),S.length&&(R=R.concat(S));var x=R.reduce((function(e,t){return e[t]>=0?e[t]+=1:e[t]=0,e}),{});if(O){var F,U=s.a.get(r,"metadata.qId",null),B=s.a.get(u,"playerMetadata.qId",null),V=U||B;if(b===i["c"].SlidesFlowControlTypes.NONE)F=V||E[0];else if(V)if(S.includes(V)){var Y=S[S.length-1],W=s.a.findIndex(C,(function(e){return e===Y}))+1;F=E[W]}else F=V;else for(var J=0;J<E.length;J++)if(!s.a.includes(H.answeredQuestions,E[J])){F=E[J];break}var X=s.a.findIndex(C,(function(e){return e===F}));G=s.a.slice(C,Math.max(X,0)),l!==i["c"].GameState.COMPLETED&&l!==i["c"].GameState.STOPPED||(F=null,G=[])}else if(0===R.length)r.options.jumble&&(C=s.a.shuffle(E),G=s.a.clone(C));else{var K=s.a.uniq(R),Z=s.a.difference(E,K);if(Q&&q){var $=Object(f["a"])(P).filter((function(e){return!L.has(e)})).filter((function(e){return N===i["i"].MASTERY_MODE_REATTEMPTS.unlimited||x[e]<N}));Z=[].concat(Object(f["a"])(Z),Object(f["a"])($))}r.options.jumble&&(Z=s.a.shuffle(Z)),t&&s.a.includes(Z,t)&&(Z=s.a.without(Z,t),Z.unshift(t)),Object(o["a"])(j)||(Z=s.a.without(Z,j.questionId),Z.unshift(j.questionId)),C=s.a.uniq(s.a.concat(K,Z)),G=s.a.clone(Z)}return{questionIds:C,questions:A,remainingQuestionsOrder:G,doneOrder:R,questionResponses:w,skippedQuestions:S,extraLifeQuestions:T,answerLaterQuestions:k,correctQuestionAttempts:L,incorrectQuestionAttempts:P,isAdaptiveLearningGame:v,shouldShowReviewScreen:M,doneQuestionsFrequency:x}}function I(e){return s.a.isPlainObject(e.player)&&(Array.isArray(e.player.responses)||(e.player.responses=[])),e}function v(e,t){var a={roomCode:t},r=Object(m["Nb"])(t);return e.user.profile.isLoggedIn&&(a.mongoId=e.user.profile.mongoId),{payload:a,isAValidGameCode:r}}function A(e,t,a){var r=t.room,n=t.player,s=!1,o=!1,u=!1,c=!1,d=!1,l=r;if(r&&r.hash&&(s=!0,r.version&&Object(m["b"])(r.version))){var p=null;u=!0,r.type===i["c"].GameType.ASYNC&&r.createdAt&&r.expiry&&(p=Object(m["C"])(r).willExpireOn.getTime()),o=!!p&&p-Date.now()<=0,o||(l=Q(r,"checkRoom",{roomCode:a}),c=l.groupData.type!==i["c"].GameGroupType.NONE,d=l.groupData.type===i["c"].GameGroupType.GROUP_CREATION)}return{isRoomCodeValid:s,isRoomExpired:o,areQuestionVersionsSupported:u,room:l,player:n||null,isAGroupGame:c,isAGroupCreationGame:d}}function S(e,t,a){var n=e.game,s=e.user.profile,i=s.isLoggedIn,u=s.mongoId,c={startSource:a},d={};return d=t&&!Object(o["a"])(t)?Object(r["a"])({},t):Object(r["a"])({},n.data.classroomInfo),i&&(d.mongoId=u),{actionData:c,payload:d}}function T(e,t,a){var r=t.room,n=t.player,s=t.lmsInfo,o=r&&r.hash,u=!1,c=!1,d=!1,l=r;return o&&r.version&&Object(m["b"])(r.version)&&(u=!0,l=Q(r,"checkAssignment",{lmsInfo:a}),c=l.groupData.type!==i["c"].GameGroupType.NONE,d=l.groupData.type===i["c"].GameGroupType.GROUP_CREATION),{isValidGame:o,areQuestionVersionsSupported:u,room:l,player:n||null,lmsInfo:s||a||null,isAGroupGame:c,isAGroupCreationGame:d}}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"checkRoom";if("joinRoom"===t){var a=s.a.get(e,"room.options","{}"),r=a;return s.a.isObject(r)||(r=JSON.parse(a)),s.a.isNumber(r.limitAttempts)?r.limitAttempts:5}var n=s.a.get(e,"room.options.limitAttempts");return s.a.isNumber(n)?n:5}function q(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,i=s.a.clone(e.game.flow.startSource),u=Object(o["a"])(i)?r:i,d=_(e,a,u,"joinRoom",n),l={roomHash:t,playerName:d.id,startSource:u};return{actionData:l,callPayload:{roomHash:t,player:d,powerupInternalVersion:s.a.toString(c["a"].CURRENT_CONFIG_API_VERSION)}}}function N(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=e&&!Object(o["a"])(e.player),u=s.a.get(e,"powerupConfigVersion","1"),c=null,l=!1,p="";if(n){c=O("join","live-async",e),c.powerupConfigVersion=u;var g=Object(m["C"])(c.room).willExpireOn;c.room.type===i["c"].GameType.ASYNC&&(l=g.getTime()-Date.now()<=0),l&&(p+=Object(d["l"])(g)),e.isCertificationGame&&Object.assign(c,{isCertificationGame:e.isCertificationGame}),e.isCertificationGame&&e.certificationRegion&&Object.assign(c,{certificationRegion:e.certificationRegion}),e.forcedRedirect&&Object.assign(c,{forcedRedirect:e.forcedRedirect})}return{isValidGame:n,response:c,hasGameExpired:l,formattedExpiryDate:p,forcePageChange:a,preventPageChange:r}}function E(e){var t="dialog",a=!1,r=!1,n=!1,u=Object(d["w"])(e),c=s.a.get(e,"response.room",{}),l=s.a.get(e,"response.player",{}),m=s.a.get(c,"options",null),g=s.a.get(e,"response.meta",{}),f={isAllowed:s.a.get(e,"response.player.isAllowed",!0),isOver:s.a.get(e,"response.player.isOver",!0),isForbidden:s.a.get(e,"response.player.isForbidden"),room:c,player:l};if(f.room.options=s.a.isString(m)?Object(p["m"])(JSON.parse(m)):Object(p["m"])(m),"player.DUPLICATE_NAME"===u&&!Object(o["a"])(c)){var b=c.type===i["c"].GameType.LIVE,y=!f.isOver&&(b||l.isRejoinAllowed);f.isForbidden?n=!0:y?a=!0:b?n=!0:r=!0}return{errorType:u,errorMeta:g,response:f,nameAlreadyTakenError:n,canResumeGame:a,canPlayAgainWithDifferentName:r,handlePreGameErrorAs:t}}function C(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=arguments.length>5?arguments[5]:void 0,d=arguments.length>6?arguments[6]:void 0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",g=arguments.length>8?arguments[8]:void 0,f=s.a.clone(e.game.flow.startSource),b=Object(o["a"])(f)?r:f,y=_(e,a,b,"joinSolo"),O={quizId:t,playerName:y.id,startSource:b,gameOptions:n,gameMode:u},h=e.applicationContext,I=e.user,v={quizId:t,player:y,userId:I.profile.isLoggedIn?I.profile.mongoId:null,gameOptions:Object(p["b"])(Object(p["f"])(n)),gameType:Object(m["j"])(i["c"].GameType.SOLO,u),powerupInternalVersion:s.a.toString(c["a"].CURRENT_CONFIG_API_VERSION),slot:parseInt(h.deviceInfo.experimentSlot,10),experiment:h.deviceInfo.experimentName,locale:h.deviceInfo.locale};return Object(o["a"])(l)||(v.referralId=l),Object(o["a"])(d)||(v.roomHash=d),Object(o["a"])(g)||(v.contestId=g),{actionData:O,callPayload:v}}function G(e,t,a,n){var i=!Object(o["a"])(s.a.get(t,"player"))||!1,u=s.a.get(t,"powerupConfigVersion","1"),c=null,d=[];if(i){c=O("join","solo",t);var m=c,p=m.room,g=m.player;d=Object(l["a"])(p.hash,g.id,g.score,g.monsterId,"waiting")}return{isValidGame:i,response:Object(r["a"])(Object(r["a"])({},c),{},{generatedPlayers:d,powerupConfigVersion:u}),forcePageChange:a,canChangeRoute:n}}function R(e,t,a){var r=t.roomHash,n=t.playerId,o=t.gameType,u=t.gameState,d=Object(m["H"])(o),l=d&&Object(m["kb"])(d),p=s.a.toString(c["a"].CURRENT_CONFIG_API_VERSION),g={roomHash:r,playerId:n,startSource:a,powerupInternalVersion:p};return o&&(g.type=o),u&&(g.state=u),e.user.profile.isLoggedIn&&(g.mongoId=e.user.profile.mongoId),g.soloApis=i["c"].SoloApis.PLAY_APIS,{isAssignedGame:l,actionData:{roomHash:r,playerName:n,startSource:a,gameType:o||"",gameState:u||"",classroomInfo:t.classroomInfo||null},callPayload:g,isGameSubDomainWhiteListed:e.applicationContext.isGameSubDomainWhiteListed}}function w(e,t){var a,n,u=!Object(o["a"])(s.a.get(e,"player"))||!1,c=s.a.get(e,"powerupConfigVersion","1"),d=null,m=[],p=!1,g="other",f=e.forcedRedirect||null,b=null===(a=e.player)||void 0===a||null===(n=a.playerMetadata)||void 0===n?void 0:n.mysticPeakData,y=e.player.tieredRank;if(u){var h=t.game.player.lastGamePlayed,I="";!Object(o["a"])(h)&&h.roomHash===e.room.hash&&h.lastVisibleQuestionId&&(I=h.lastVisibleQuestionId),d=O("rejoin","",e,I);var v=d,A=v.room,S=v.player;if(A.type===i["c"].GameType.SOLO){var T=s.a.isObject(S.responses)?Object.keys(S.responses).length:1;m=Object(l["a"])(A.hash,S.id,S.score,S.monsterId,"leaderboard",A.options,T,.6)}e.isCertificationGame&&(p=!0),e.isCertificationGame&&e.certificationRegion&&(g=e.certificationRegion)}return{isValidGame:u,response:Object(r["a"])(Object(r["a"])({},d),{},{generatedPlayers:m,powerupConfigVersion:c,forcedRedirect:f,isCertificationGame:p,certificationRegion:g,mysticPeakData:b,mysticPeakTieredRank:y})}}function M(e,t,a){Object(m["kb"])(a);var n=Object(r["a"])({},t);return!(!t||Object(o["a"])(t.questions))&&(n={questions:Object(m["Pb"])(t.questions,{dataIsStrigified:!1,forGameBeingPlayed:!0,slidesFlowControlType:e.questions.slidesFlowControlType}),traits:t.traits||null,canvas:t.canvas},n)}function k(e,t,a){var r=e.data,n=r.gameState,s=r.gameType,u=r.gameMode,c=r.quizId,d=r.roomHash,l=(r.hostId,r.hostSessionId,e.player),p=(e.flow,e.questions.remainingOrder),g=!1,f=!1,b=!1,y=!1,O=!1,h=u===i["c"].GameMode.TEAM,I=t.allAnsweredQuestionsOrder.length,v={hasSeenSummaryAtleastOnce:!1},A=s===i["c"].GameType.LIVE&&n===i["c"].GameState.WAITING,S=n===i["c"].GameState.RUNNING,T=u===i["c"].GameMode.CHALLENGE,j=t.isPlayerTheGameHost,q={roomHash:d,gameType:s,gameState:n,playerId:l.playerId,gameId:d},N=Object(m["ub"])({gameMode:u,gameType:s}),E=u===i["c"].GameMode.TEACHER_PACED,C=!0===l.isOver,G=t.isMasteryMode,R=t.hasReachedMastery,w=Object(m["f"])({remainingOrder:p,hasReachedMastery:R}),M=!t.areQuestionAttemptsLeft&&!N,k=t.totalAnswerLaterQuestions,P=t.isUserOnReviewScreen;G&&(M=w),C||M&&!P?(f=!0,v.hasSeenSummaryAtleastOnce=!0):I>0||N||E||k>0?b=!0:s===i["c"].GameType.ASYNC?y=!0:O=!0;var L=l.lastGamePlayed,z=!1;return(A||S)&&(Object(o["a"])(L)||L.roomHash!==d||L.playerId!==l.playerId)&&(z=!0),{shouldDoExit:g,shouldSetIncompleteGame:z,isGameInWaitingState:A,isGameInRunningState:S,hasPlayerGameEnded:f,isPlayerInBetweenGame:b,isUserOnReviewScreen:P,goToWaitingWhenNoQuesAnswered:y,goToCountdownWhenNoQuesAnswered:O,quizId:c,showTeamAssignedSplash:h,playerHasJoinedTheGamePayload:v,isAChallengeGame:T,isPlayerTheGameHost:j,gameData:q,isPlayerMarkedOver:C,isMasteryMode:G,hasReachedMastery:R}}function P(e){var t=!0,a=s.a.get(e,"room.type"),r=s.a.get(e,"room.quizId"),n=s.a.get(e,"room.state"),o=s.a.get(e,"room.code"),u=a===i["c"].GameType.SOLO,c=n===i["c"].GameState.STOPPED||n===i["c"].GameState.COMPLETED;return a&&r||(t=!1),{isValidResponse:t,isSoloGame:u,quizId:r,isGameExpired:c,roomCode:o}}function L(e,t,a,r,n){var s=e.user.profile.mongoId,i=e.appSettings.selectedLanguage,u=e.applicationContext.deviceInfo.quizizzUID,c={quizId:t,type:a,expiry:r,locale:i,gameOptions:Object(p["b"])(n),memeSet:n.memeset};return Object(o["a"])(s)?Object(o["a"])(u)||(c.hostSessionId=u):c.hostId=s,{callPayload:c}}function z(e,t){var a=e.user.profile.mongoId||"",n="";return a||(n=e.applicationContext.deviceInfo.quizizzUID),Object(r["a"])({hostId:a,hostSessionId:n},t.data)}function D(e,t){var a=s.a.get(e,"user.profile.isLoggedIn",!1),r=s.a.get(e,"game.player.lastGamePlayed.roomCode",""),n=!1;return a||t!==r||(n=!0),{shouldResetIncompleteGame:n}}function Q(e,t,a){return Object(r["a"])(Object(r["a"])({},e),{},{type:Object(m["H"])(e.type),mode:Object(m["F"])(e.type),options:Object(p["m"])(e.options),groupData:H(e,t,a)})}function _(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,c=e.applicationContext,d=e.game,l=e.user.profile,m=c.clientType,p=Object(g["c"])(t),f=Array.isArray(a)?s.a.join(a,"|"):a;u["a"].invariant(!Object(o["a"])(f),"preparePlayerDataForJoin: 'startSource' is required for joining a game. Got '".concat(f,"' for callType '").concat(r,"'"));var b=null;-1!==l.selectedAvatar&&l.selectedAvatar?b=l.selectedAvatar:-1!==n&&(b=n);var y={id:p,origin:m,isGoogleAuth:!1,avatarId:b,startSource:f||i["k"].get(i["k"].List.MISC)};if(l.isLoggedIn&&(y.isGoogleAuth=!0,y.name=l.name,y.mongoId=l.mongoId),!Object(o["a"])(d.data.classroomInfo)&&d.data.classroomInfo.lmsName&&d.data.isClassroomGame){var O=d.data.classroomInfo.lmsName,h="";l.lmsInfo&&l.lmsInfo[O]&&(h=l.lmsInfo[O].studentId),y.assignment={studentId:h,courseId:d.data.classroomInfo.courseId,assignmentId:d.data.classroomInfo.assignmentId,lmsName:O}}var I=c.deviceInfo;return m===i["c"].ClientType.WEB?(y.userAgent=I.userAgent,y.uid=I.quizizzUID||"unknown",y.expName=I.experimentName||"null",y.expSlot=I.experimentSlot||"null"):(y.metadata=I,I.detailedAppVersion&&(y.appVersion=I.detailedAppVersion,y.uid=I.uniqueId||"unknown")),y}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Array.isArray(e.groupIds)?e.groupIds:[],n=i["c"].GameGroupType.NONE,s=x(e)?e.createGroup:null;return r.length>0&&(n=s?i["c"].GameGroupType.GROUP_CREATION:i["c"].GameGroupType.ONLY_ASSIGNED),{type:n,ids:r,createToken:s,sourceRequest:t,sourceRequestMeta:a}}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e&&e.createGroup;return s.a.isString(t)&&!Object(o["a"])(t)}},d7c1:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"d",(function(){return d})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return m}));var r=a("5530"),n=(a("d81d"),a("2ef0")),s=a.n(n),o=a("1383"),i=a("f121"),u=a("4871");function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=e.user,i=s.a.map(t.groups,(function(e){return Object(r["a"])(Object(r["a"])({},s.a.pick(e,["color","name","requireParentEmail","isGoogle"])),{},{id:e._id})})),u=i.length>0&&i[0].id;return{isValidResponse:u,response:{teacher:t.teacher||{},groups:i},eventData:p(i,n,o.profile,a)}}function d(e,t,a,n,s,o){var i=e.user,c=e.groups.inviteGroupInfo,d=Object(u["c"])(t.user),l=d.groupIds||i.profile.groupIds,m={},g=!1;"checkRoom"===s&&o.roomCode&&(g=!0,m.roomCode=o.roomCode),"checkAssignment"===s&&o.lmsInfo&&o.lmsInfo.lmsName&&(g=!0,m.lmsInfo=o.lmsInfo);var f=p(c.groups,s,i.profile,n);return{mutationPayload:{user:d,updatedGroupIds:l},returnData:{didJoin:!0,persistInvite:!1,shouldContinueWithFlow:g,flowActionArgs:m},eventData:Object(r["a"])(Object(r["a"])({},f),{},{isParentFilled:!(!a.parent||!a.parent.email),didError:!1})}}function l(e,t,a,n){e.game;var s=e.user,o=e.groups.inviteGroupInfo,i=p(o.groups,n,s.profile,a);return{eventData:Object(r["a"])(Object(r["a"])({},i),{},{isParentFilled:!(!t.parent||!t.parent.email),didError:!0})}}function m(e){if(e&&e.length)for(var t=0;t<e.length;t++)if(e[t].requireParentEmail)return!0;return!1}function p(e,t,a,r){var n=null;return r===i["c"].GroupJoinModalTypes.FROM_LINK?n="link":Object(o["a"])(t)||(n="checkRoom"===t?"gcode":"gcl"),{groupIds:s.a.map(e,(function(e){return e.id})),isParentRequired:m(e),isFirstNamePrefilled:!!a.firstName,isLastNamePrefilled:!!a.lastName,isParentPrefilled:!!a.parentEmail,source:n}}},e7e7:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("b0c0");var r=a("1383"),n=a("f121");a("3bb0");function s(e,t){var a=e.data.quiz,s=t.query&&t.query.from,o=t.query&&t.query.startSource,i=t.query&&t.query.referrer||"",u=t.query&&"true"===t.query.studentShare,c="",d="",l="",m=1;Object(r["a"])(a.info)?Object(r["a"])(e.data.draft)||(d=e.data.draft.name,l=e.data.draft.image,m=e.data.draft.questions&&e.data.draft.questions.length||1):(d=a.info.name,l=a.info.image,m=a.info.questions&&a.info.questions.length||1);var p={quizId:a._id,quizName:d,quizImage:l,quizNumQuestions:m};switch(u&&(c=n["k"].get(n["k"].List.FROM_SHARE.VIA_JOIN)),s){case"admin":c=n["k"].get(n["k"].List.FROM_ADMIN.PARAM.DIRECT);break;case"join_admin_share":c=n["k"].get(n["k"].List.FROM_SHARE.VIA_ADMIN);break;case"soloLinkShare":c=n["k"].get(n["k"].List.FROM_ADMIN.PARAM.SOLO_LINK_SHARE),o&&(c+="|".concat(o));case"parentEmail":c=n["k"].get(n["k"].List.FROM_ADMIN.PARAM.PARENT_EMAIL);break;case"parentEmailLink":c=n["k"].get(n["k"].List.FROM_ADMIN.PARAM.PARENT_EMAIL_LINK);break}return{quizDetails:p,startSource:c,soloLinkReferrerId:i}}}}]);
//# sourceMappingURL=app_cookers.517eb4458b6595d62c8a.js.map